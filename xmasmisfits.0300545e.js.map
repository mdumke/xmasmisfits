{"mappings":"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","sources":["<anon>","src/main.js","src/components/calendar-door/calendar-door.js","src/components/calendar-door/template.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-8a787c72b47872a1.js","src/utils.js","src/components/pan-container/pan-container.js","src/components/pan-container/template.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-6a4f8999064a99ff.js","src/components/progress-bar/progress-bar.js","src/components/progress-bar/template.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-8eb5c38057795d8e.js","src/components/media-player/media-player.js","src/components/media-player/template.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-3dcf52b3300d5e6a.js","src/components/loading-spinner/loading-spinner.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-ed1e523cf5ed702a.js","src/components/blur-overlay/blur-overlay.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-59eea37eddbbc81a.js","src/components/snow-overlay/snow-overlay.js","src/components/snow-overlay/template.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-7edb4a32e2224745.js","src/components/snow-overlay/snow-canvas.js","src/components/audio-toggle/audio-toggle.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-798a1f209abd2ba3.js","src/components/fullscreen-toggle/fullscreen-toggle.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-9b930d377abff5e8.js","src/components/animation-sequence/animation-sequence.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-fac13e0a3f077ac4.js","src/contexts/context-manager.js","src/contexts/title-context.js","src/asset-loader.js","src/audio-player.js","src/ui.js","src/storage.js","src/contexts/calendar-context.js","src/timer.js"],"sourcesContent":["/*\n * Web component that prepares a calendar door element, incluing data\n * loading, opening animation, and content display.\n *\n */ var $6954ac0c9707709f$exports = {};\n$6954ac0c9707709f$exports = \"*{box-sizing:border-box;margin:0;padding:0}:host{z-index:5;width:100%;height:100%;display:block;position:absolute}.open{pointer-events:none}main{width:100%;height:100%;position:relative}.door-frame{cursor:pointer;user-select:none;-webkit-user-drag:none;background-position:50%;background-repeat:no-repeat;border:5px dashed #333;border-radius:3px;justify-content:center;align-items:center;width:100%;height:100%;transition:transform 1.2s ease-out;display:flex;position:absolute;top:0;left:0}.label-container{aspect-ratio:1;justify-content:center;align-items:center;display:flex;& .label-text{width:52px;height:52px}}.content-wrapper{background-color:#222;border:1px solid #555;border-radius:2px;width:100%;height:100%;padding:8px;position:absolute;top:0;left:0;& .door-content{cursor:pointer;-webkit-user-drag:none;background-position:50%;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;justify-content:center;align-items:center;width:100%;height:100%;transition:background-size .9s ease-out;display:flex;box-shadow:inset -2px 2px 3px #0000004d;&:hover{background-size:106% 106%}}}.door-backdrop{background-color:#fff;border-radius:3px;width:100%;height:100%;position:absolute;top:0;left:0}.play-icon{cursor:pointer;background-color:#0006;border:none;border-radius:50%;width:30px;height:30px}.play-icon:before{content:\\\"\\\";border-top:9px solid #0000;border-bottom:9px solid #0000;border-left:14px solid #ffffffb3;width:0;height:0;position:absolute;top:50%;left:50%;transform:translate(-34%,-50%)}.hide{display:none}.shake{animation:.5s shake}@keyframes shake{0%{transform:translate(0)}20%{transform:translate(-3px)}40%{transform:translate(3px)}60%{transform:translate(-1px)}80%{transform:translate(1px)}to{transform:translate(0)}}\";\n\n\nconst $38a474b1bc5c6f85$export$ce69bd05624d0c48 = document.createElement('template');\n$38a474b1bc5c6f85$export$ce69bd05624d0c48.innerHTML = `\n  <style>${$6954ac0c9707709f$exports}</style>\n\n  <main>\n    <div part=\"door-backdrop\" class=\"door-backdrop\">\n      <loading-spinner></loading-spinner>\n    </div>\n\n    <div class=\"content-wrapper\">\n      <div id=\"door-content\" class=\"door-content\">\n        <div id=\"play-icon\" class=\"play-icon hide\" tabindex=\"0\" role=\"button\" aria-label=\"Play\">\n        </div>\n      </div>\n    </div>\n\n    <div id=\"door-frame\" class=\"door-frame\">\n      <div class=\"label-container\" part=\"label-container\">\n        <div id=\"label-text\" class=\"label-text\"></div>\n      </div>\n    </div>\n  </main>\n`;\n\n\n/*\n * Various helper functions\n *\n */ const $820877bea407f5fe$export$795b8c82a7ea6465 = (doorLabel)=>{\n    const now = new Date();\n    const year = now.getFullYear();\n    if (year > 2025) return true;\n    const maxDay = now.getDate();\n    const day = parseInt(doorLabel, 10);\n    return !isNaN(day) && day <= maxDay;\n};\nconst $820877bea407f5fe$export$1c9f709888824e05 = (message)=>{\n    const $debug = document.getElementById('debug');\n    if ($debug) $debug.textContent = message;\n    else console.log('[Debug]', message);\n};\n\n\n/**\n * @element calendar-door\n * @summary A calendar door that can be opened to reveal content.\n *\n * @fires show-player - Fired when the door content is clicked to display the player.\n * The event detail contains an object: { src: string } with the content source URL.\n *\n * @part label-container - The container element for the door label.\n * @part door-content - The content area revealed when the door is opened.\n */ class $f5891f20272693b8$var$CalendarDoor extends HTMLElement {\n    /**\n   * @property {Object} config - Configuration object for the door, example:\n   * {\n   *   id: 'door-01',\n   *   label: '1',\n   *   position: { x: 100, y: 200 },\n   *   size: { width: 91, height: 131 },\n   *   direction: 'right', // (optional, missing indicates left)\n   *   filename: 'doors/door-01.png',\n   *   packageId: 'package-01'\n   * }\n   */ static get observedAttributes() {\n        return [\n            'preload'\n        ];\n    }\n    set config(obj) {\n        this._config = obj;\n        this.update();\n    }\n    get config() {\n        if (!this._config) throw new Error('[CalendarDoor] config object not set');\n        return this._config;\n    }\n    /**\n   * @property {Object} packageConfig - Configuration object for the package\n   * associated with this door. Example:\n   * {\n   *   thumbnail: 'packages/record-01.webp',\n   *   src: 'https://example.com/xyz',\n   * }\n   */ set packageConfig(pkg) {\n        this._packageConfig = pkg;\n        this.updatePackage();\n    }\n    get packageConfig() {\n        if (!this._packageConfig) throw new Error('[CalendarDoor] packageConfig object not set');\n        return this._packageConfig;\n    }\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.appendChild((0, $38a474b1bc5c6f85$export$ce69bd05624d0c48).content.cloneNode(true));\n        this.$doorFrame = this.shadowRoot.querySelector('#door-frame');\n        this.$doorLabel = this.shadowRoot.querySelector('#label-text');\n        this.$doorContent = this.shadowRoot.querySelector('#door-content');\n    }\n    connectedCallback() {\n        this.dataset.interactive = '';\n        this.dataset.door = '';\n        this.update();\n    }\n    attributeChangedCallback(name, _oldValue, newValue) {\n        if (name === 'open' && newValue !== null) return this.openDoor();\n        this.update();\n    }\n    update() {\n        this.id = this.config.id;\n        const { top: top, left: left } = this.config.position || {};\n        const { width: width, height: height } = this.config.size || {};\n        this.style.width = `${width}px`;\n        this.style.height = `${height}px`;\n        this.style.top = `${top}px`;\n        this.style.left = `${left}px`;\n        const frameUrl = `images/${this.config.filename}`;\n        const labelUrl = `images/door-numbers/${this.config.label}.webp`;\n        this.$doorFrame.style.backgroundImage = `url(${frameUrl})`;\n        this.$doorLabel.style.backgroundImage = `url(${labelUrl})`;\n    }\n    updatePackage() {\n        const imgSrc = this.packageConfig.thumbnail;\n        this.$doorContent.style.backgroundImage = `url('images/${imgSrc}')`;\n        this.$doorContent.querySelector('#play-icon').classList.remove('hide');\n    }\n    openIfAllowed() {\n        if (this.mayOpen()) this.open();\n    }\n    mayOpen() {\n        return (0, $820877bea407f5fe$export$795b8c82a7ea6465)(this.config.label);\n    }\n    shake() {\n        this.$doorFrame.classList.remove('shake');\n        this.offsetWidth // force reflow to restart CSS animation\n        ;\n        this.$doorFrame.classList.add('shake');\n    }\n    open() {\n        const width = this.config.size.width;\n        const direction = this.config.direction || 'left';\n        const dx = direction === 'left' ? `-${width - 2}px` : `${width - 2}px`;\n        this.$doorFrame.style.transform = `translateX(${dx})`;\n        this.$doorFrame.classList.add('open');\n        this.removeAttribute('data-door');\n        this.setAttribute('open', 'true');\n        this.dataset.content = '';\n    }\n    displayContent() {\n        this.dispatchEvent(new CustomEvent('show-player', {\n            bubbles: true,\n            composed: true,\n            detail: {\n                src: this.packageConfig.src\n            }\n        }));\n    }\n}\ncustomElements.define('calendar-door', $f5891f20272693b8$var$CalendarDoor);\n\n\n/*\n * Web component to pan around an HTML element by clicking and dragging\n *\n */ var $fbb3e97c89bfbad7$exports = {};\n$fbb3e97c89bfbad7$exports = \"*{box-sizing:border-box;margin:0;padding:0}:host{display:block}main{cursor:grab;width:100%;height:100%;overflow:scroll;&:active{cursor:grabbing}user-select:none;-webkit-user-drag:none;scrollbar-width:none;-ms-overflow-style:none&::-webkit-scrollbar{display:none}overscroll-behavior:contain;touch-action:pan-x pan-y;-webkit-overflow-scrolling:auto}\";\n\n\nconst $6ef5f09af183a1a0$export$ce69bd05624d0c48 = document.createElement('template');\n$6ef5f09af183a1a0$export$ce69bd05624d0c48.innerHTML = `\n  <style>${$fbb3e97c89bfbad7$exports}</style>\n\n  <main>\n    <slot></slot>\n  </main>\n`;\n\n\n/**\n * @element pan-container\n * @summary A container that allows panning of larger content by click-and-drag.\n *\n * Elements within the container that have the `data-interactive`\n * attribute will be exempt from the drag-to-pan operation.\n * This allows interactive child elements (such as buttons, links, or inputs)\n * to receive pointer events without triggering panning.\n */ class $bcd9bd9e89a789ee$var$PanContainer extends HTMLElement {\n    isDown = false;\n    startX = 0;\n    startY = 0;\n    scrollLeft = 0;\n    scrollTop = 0;\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.appendChild((0, $6ef5f09af183a1a0$export$ce69bd05624d0c48).content.cloneNode(true));\n        this.$container = this.shadowRoot.querySelector('main');\n    }\n    connectedCallback() {\n        this.registerListeners();\n    }\n    disconnectedCallback() {\n        this.removeListeners();\n    }\n    scrollToInitial() {\n        const { scrollWidth: scrollWidth, clientWidth: clientWidth, scrollHeight: scrollHeight, clientHeight: clientHeight } = this.$container;\n        const centerX = (scrollWidth - clientWidth) / 2;\n        const centerY = (scrollHeight - clientHeight) / 2;\n        this.$container.scrollTo(centerX, centerY - 60);\n    }\n    scrollToPosition({ x: x, y: y }) {\n        this.$container.scrollTo(x, y);\n    }\n    startPan = (e)=>{\n        if (e.target.closest('[data-interactive]')) return;\n        this.isDown = true;\n        this.$container.classList.add('active');\n        this.startX = e.clientX;\n        this.startY = e.clientY;\n        this.scrollLeft = this.$container.scrollLeft;\n        this.scrollTop = this.$container.scrollTop;\n    // For native scrolling, pointer capture is not needed; comment it out\n    // this.$container.setPointerCapture(e.pointerId)\n    };\n    updatePan = (e)=>{\n        // With native scrolling, do not manually set scrollLeft/Top.\n        // Keep this if you still want desktop mouse-drag behavior,\n        // but on touch devices Safari won't deliver pointermove reliably.\n        if (!this.isDown) return;\n        // e.preventDefault() can block native scroll; remove it for iOS touch\n        // e.preventDefault()\n        const x = e.clientX;\n        const y = e.clientY;\n        const walkX = x - this.startX;\n        const walkY = y - this.startY;\n        // On touch, let native scrolling do the work.\n        // On desktop mouse, you may still want manual panning:\n        if (e.pointerType === 'mouse') {\n            this.$container.scrollLeft = this.scrollLeft - walkX;\n            this.$container.scrollTop = this.scrollTop - walkY;\n        }\n    };\n    stopPan = (e)=>{\n        this.isDown = false;\n        this.$container.classList.remove('active');\n    // this.$container.releasePointerCapture(e.pointerId)\n    };\n    onScroll = ()=>{\n        this.dispatchPanUpdate();\n    };\n    dispatchPanUpdate() {\n        this.dispatchEvent(new CustomEvent('pan-update', {\n            bubbles: true,\n            composed: true,\n            detail: {\n                scrollLeft: this.$container.scrollLeft,\n                scrollTop: this.$container.scrollTop\n            }\n        }));\n    }\n    registerListeners() {\n        this.$container.addEventListener('pointerdown', this.startPan);\n        this.$container.addEventListener('pointerup', this.stopPan);\n        this.$container.addEventListener('pointercancel', this.stopPan);\n        this.$container.addEventListener('pointermove', this.updatePan);\n        this.$container.addEventListener('scroll', this.onScroll);\n    }\n    removeListeners() {\n        this.$container.removeEventListener('pointerdown', this.startPan);\n        this.$container.removeEventListener('pointerup', this.stopPan);\n        this.$container.removeEventListener('pointercancel', this.stopPan);\n        this.$container.removeEventListener('pointermove', this.updatePan);\n        this.$container.removeEventListener('scroll', this.onScroll);\n    }\n}\ncustomElements.define('pan-container', $bcd9bd9e89a789ee$var$PanContainer);\n\n\n/*\n * Web component to display a simple progress bar\n *\n */ var $b5863b9b277e97df$exports = {};\n$b5863b9b277e97df$exports = \"*{background-origin:padding-box;margin:0;padding:0}:host{background-color:#fff;border:1px solid #222;border-radius:3px;width:100%;height:8px;display:block;overflow:hidden}.bar{background-color:#00d41c;border-right:1px solid #222;width:0%;height:100%}\";\n\n\nconst $5946147900fd7666$export$ce69bd05624d0c48 = document.createElement('template');\n$5946147900fd7666$export$ce69bd05624d0c48.innerHTML = `\n  <style>${$b5863b9b277e97df$exports}</style>\n\n  <main id=\"bar\" class=\"bar\" part=\"bar\"></main>\n`;\n\n\n/**\n * @element progress-bar\n * @summary A simple accessible progress indicator.\n *\n * @attr {number} value - The current progress value.\n * @attr {number} max - The maximum progress value.\n * @part bar - The filled bar element, used for styling.\n */ class $fc998b0c86126c1e$var$ProgressBar extends HTMLElement {\n    static get observedAttributes() {\n        return [\n            'value',\n            'max'\n        ];\n    }\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.appendChild((0, $5946147900fd7666$export$ce69bd05624d0c48).content.cloneNode(true));\n        this.$container = this.shadowRoot.querySelector('#container');\n        this.$bar = this.shadowRoot.querySelector('#bar');\n    }\n    connectedCallback() {\n        this.setAttribute('role', 'progressbar');\n        this.setAttribute('aria-valuemin', '0');\n        this.update();\n    }\n    attributeChangedCallback() {\n        this.update();\n    }\n    update() {\n        const max = Number(this.getAttribute('max') || 100);\n        const value = Math.min(Number(this.getAttribute('value') || 0), max);\n        const percent = max === 0 ? 0 : value / max * 100;\n        this.$bar.style.width = `${percent}%`;\n        this.setAttribute('aria-valuenow', value.toString());\n        this.setAttribute('aria-valuemax', max.toString());\n    }\n}\ncustomElements.define('progress-bar', $fc998b0c86126c1e$var$ProgressBar);\n\n\n/*\n * Web component to show an embedded youtube video in a lightbox overlay.\n *\n */ var $190d25bdc1a70f0f$exports = {};\n$190d25bdc1a70f0f$exports = \"*{box-sizing:border-box;margin:0;padding:0}:host{z-index:10;display:block;position:absolute;inset:0}.overlay{background-color:#000000d9;justify-content:center;align-items:center;width:100%;height:100%;display:flex;& iframe{aspect-ratio:16/9;border:none;width:95%;max-width:560px;max-height:315px}}.close-button{color:#fff;text-align:center;cursor:pointer;z-index:11;background-color:#00000080;border:none;border-radius:15px;width:35px;height:35px;font-size:20px;line-height:30px;position:absolute;top:10px;right:10px}\";\n\n\nconst $cacb41ab0708d436$export$ce69bd05624d0c48 = document.createElement('template');\n$cacb41ab0708d436$export$ce69bd05624d0c48.innerHTML = `\n  <style>${$190d25bdc1a70f0f$exports}</style>\n\n  <div part=\"overlay\" class=\"overlay\"></div>\n  <button part=\"close-button\" class=\"close-button\" aria-label=\"Close\">\n    &times;\n  </button>\n`;\n\n\n/**\n * @element media-player\n * @summary A media player lightbox for displaying images or videos.:w\n *\n * @part overlay - The overlay background element.\n * @part close-button - The button to close the lightbox.\n */ class $57658e45f7539bec$var$MediaPlayer extends HTMLElement {\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.appendChild((0, $cacb41ab0708d436$export$ce69bd05624d0c48).content.cloneNode(true));\n        this.$overlay = this.shadowRoot.querySelector('[part=\"overlay\"]');\n        this.$closeButton = this.shadowRoot.querySelector('[part=\"close-button\"]');\n    }\n    connectedCallback() {\n        this.classList.add('hide');\n        this.$overlay.addEventListener('click', this.close);\n        this.$closeButton.addEventListener('click', this.close);\n    }\n    disconnectedCallback() {\n        this.$overlay.removeEventListener('click', this.close);\n        this.$closeButton.removeEventListener('click', this.close);\n    }\n    displayImage(event) {\n        const { src: src } = event.detail;\n        this.$overlay.innerHTML = `\n    <iframe\n      src=\"${src}&autoplay=1&rel=0\"\n      frameborder=\"0\"\n      allow=\"autoplay; clipboard-write; encrypted-media; picture-in-picture\"\n      referrerpolicy=\"strict-origin-when-cross-origin\"\n      allowfullscreen\n    ></iframe>\n    `;\n        this.classList.remove('hide');\n    }\n    close = (e)=>{\n        if (e.target.tagName === 'IMG') return;\n        this.classList.add('hide');\n        this.$overlay.innerHTML = '';\n        this.dispatchEvent(new CustomEvent('player-closed', {\n            bubbles: true,\n            composed: true\n        }));\n    };\n}\ncustomElements.define('media-player', $57658e45f7539bec$var$MediaPlayer);\n\n\n/*\n * Web component that displays a spinning ring\n *\n */ var $1956b322c3b2fefa$exports = {};\n$1956b322c3b2fefa$exports = \":host{--spinner-width:3px;--spinner-size:30px;--spinner-color:#555;--spinner-background-color:#f3f3f3;width:100%;height:100%;display:block;position:relative}.spinner{width:var(--spinner-size);height:var(--spinner-size);border:var(--spinner-width)solid var(--spinner-background-color);border-top:var(--spinner-width)solid var(--spinner-color);border-radius:50%;animation:2.5s linear infinite spin;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}@keyframes spin{0%{transform:translate(-50%,-50%)rotate(0)}to{transform:translate(-50%,-50%)rotate(360deg)}}\";\n\n\n/**\n * @element loading-spinner\n * @summary A loading spinner component.\n *\n * @part spinner - The spinner element.\n */ class $93137edee75c2f39$var$LoadingSpinner extends HTMLElement {\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.innerHTML = `\n      <style>${$1956b322c3b2fefa$exports}</style>\n\n      <div class=\"spinner\" part=\"spinner\"></div>\n    `;\n    }\n}\ncustomElements.define('loading-spinner', $93137edee75c2f39$var$LoadingSpinner);\n\n\n/*\n * Web component that adds a blur overlay masking to its parent element.\n * Used to blur out the edges of the calendar.\n *\n */ var $0b566ea76bd3e461$exports = {};\n$0b566ea76bd3e461$exports = \":host{--width:5px;--edge-opacity:.7;pointer-events:none;z-index:2;background:linear-gradient(to bottom,rgba(0,0,0,var(--edge-opacity)),#0000 var(--width),#0000 calc(100% - var(--width)),rgba(0,0,0,var(--edge-opacity))),linear-gradient(to right,rgba(0,0,0,var(--edge-opacity)),#0000 var(--width),#0000 calc(100% - var(--width)),rgba(0,0,0,var(--edge-opacity)));background-blend-mode:lighten;width:100%;height:100%;display:block;position:absolute;top:0;left:0}\";\n\n\nclass $87e83b09179186b1$var$BlurOverlay extends HTMLElement {\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.innerHTML = `\n      <style>${$0b566ea76bd3e461$exports}</style>\n    `;\n    }\n}\ncustomElements.define('blur-overlay', $87e83b09179186b1$var$BlurOverlay);\n\n\n/*\n * Web component that renders snow on a transparent canvas overlay\n *\n */ var $bdf1bd049d234244$exports = {};\n$bdf1bd049d234244$exports = \"*{box-sizing:border-box;margin:0;padding:0}:host{display:block;position:relative}.snow-canvas{z-index:2;pointer-events:none;position:absolute;top:0;left:0}::slotted(*){z-index:1;position:relative}\";\n\n\nconst $3d32e77740a6959a$export$ce69bd05624d0c48 = document.createElement('template');\n$3d32e77740a6959a$export$ce69bd05624d0c48.innerHTML = `\n  <style>${$bdf1bd049d234244$exports}</style>\n\n  <canvas class=\"snow-canvas\"></canvas>\n  <slot></slot>\n`;\n\n\nclass $6b9e2910d00ebaa3$export$e0baf71db43505fd {\n    // Central configuration object for snowfall tuning\n    static DEFAULT_CONFIG = {\n        radius: {\n            min: 1,\n            range: 4\n        },\n        opacity: {\n            min: 0.9,\n            range: 0.1\n        },\n        blur: {\n            min: 3,\n            range: 1\n        },\n        fallSpeed: {\n            min: 0.1,\n            range: 0.7\n        },\n        driftSpeed: {\n            baseRange: 0.1,\n            depthRange: 1.8\n        },\n        driftPhaseIncrement: {\n            base: 0.01,\n            factor: 0.01\n        }\n    };\n    constructor($canvas, config = {}){\n        this.$canvas = $canvas;\n        this.ctx = $canvas.getContext('2d');\n        this.snowflakes = [];\n        this.running = false;\n        this.animate = this.animate.bind(this);\n        this.config = {\n            ...$6b9e2910d00ebaa3$export$e0baf71db43505fd.DEFAULT_CONFIG,\n            ...config\n        };\n    }\n    start(count) {\n        this.initSnowflakes(count);\n        if (!this.running) {\n            this.running = true;\n            this.animate();\n        }\n    }\n    stop() {\n        this.running = false;\n    }\n    setConfig(partial) {\n        this.config = {\n            ...this.config,\n            ...partial\n        };\n    }\n    initSnowflakes(count) {\n        this.snowflakes = [];\n        const cfg = this.config;\n        for(let i = 0; i < count; i++){\n            const depth = Math.random() // 0 = far, 1 = near\n            ;\n            this.snowflakes.push({\n                depth: depth,\n                x: Math.random() * this.$canvas.width,\n                y: Math.random() * this.$canvas.height,\n                radius: cfg.radius.min + depth * cfg.radius.range,\n                opacity: cfg.opacity.min + depth * cfg.opacity.range,\n                blur: cfg.blur.min + depth * cfg.blur.range,\n                speed: cfg.fallSpeed.min + depth * cfg.fallSpeed.range,\n                // drifting (sideways drift + drift phase\n                xSpeed: (Math.random() - 0.5) * (cfg.driftSpeed.baseRange + depth * cfg.driftSpeed.depthRange),\n                xOffset: Math.random() * Math.PI * 2\n            });\n        }\n    }\n    animate() {\n        if (!this.running) return;\n        const { ctx: ctx, $canvas: $canvas } = this;\n        ctx.clearRect(0, 0, $canvas.width, $canvas.height);\n        for (const flake of this.snowflakes){\n            this.drawFlake(flake);\n            flake.y += flake.speed;\n            // drifting: gentle wave motion\n            flake.x += flake.xSpeed * Math.sin(flake.xOffset);\n            flake.xOffset += this.config.driftPhaseIncrement.base + flake.depth * this.config.driftPhaseIncrement.factor;\n            if (flake.y > $canvas.height) {\n                flake.y = -flake.radius;\n                flake.x = Math.random() * $canvas.width;\n                flake.xOffset = Math.random() * Math.PI * 2;\n            }\n        }\n        requestAnimationFrame(this.animate);\n    }\n    drawFlake({ x: x, y: y, radius: radius, opacity: opacity, blur: blur }) {\n        const ctx = this.ctx;\n        ctx.save();\n        ctx.globalAlpha = opacity;\n        ctx.shadowBlur = blur;\n        ctx.shadowColor = '#006b66ff';\n        ctx.fillStyle = '#ffffffff';\n        ctx.beginPath();\n        ctx.arc(x, y, radius, 0, Math.PI * 2);\n        ctx.fill();\n        ctx.restore();\n    }\n}\n\n\nclass $ea0160750ba569a4$var$SnowOverlay extends HTMLElement {\n    static get observedAttributes() {\n        return [\n            'width',\n            'height'\n        ];\n    }\n    get width() {\n        return this.getAttribute('width') || 300;\n    }\n    set width(val) {\n        this.setAttribute('width', val);\n    }\n    get height() {\n        return this.getAttribute('height') || 150;\n    }\n    set height(val) {\n        this.setAttribute('height', val);\n    }\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.appendChild((0, $3d32e77740a6959a$export$ce69bd05624d0c48).content.cloneNode(true));\n        this.$canvas = this.shadowRoot.querySelector('canvas');\n        this.snowCanvas = new (0, $6b9e2910d00ebaa3$export$e0baf71db43505fd)(this.$canvas);\n    }\n    disconnectedCallback() {\n        this.snowCanvas.stop();\n    }\n    attributeChangedCallback(name, _oldValue, newValue) {\n        if (name === 'width') {\n            this.style.width = `${newValue}px`;\n            this.$canvas.width = Number(newValue);\n        }\n        if (name === 'height') {\n            this.style.height = `${newValue}px`;\n            this.$canvas.height = Number(newValue);\n        }\n    }\n    startSnow(count) {\n        this.snowCanvas.start(count);\n    }\n}\ncustomElements.define('snow-overlay', $ea0160750ba569a4$var$SnowOverlay);\n\n\n/*\n * Web component button to turn the volume on and off\n *\n */ var $9f1e96e839d699eb$exports = {};\n$9f1e96e839d699eb$exports = \"*{box-sizing:border-box;margin:0;padding:0}:host{cursor:pointer;z-index:6;will-change:transform;background-color:#fff;border-radius:50%;width:48px;height:48px;transition:transform .12s,box-shadow .12s;display:block;box-shadow:0 2px 6px #0000004d}.img-wrapper{pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:flex}img{pointer-events:none;width:60%;height:60%;display:block}\";\n\n\nclass $9849d1cdd885665c$var$AudioToggle extends HTMLElement {\n    static get observedAttributes() {\n        return [\n            'on',\n            'off'\n        ];\n    }\n    attributeChangedCallback(name, _oldValue, newValue) {\n        // normalize: ensure only one of 'on' or 'off'\n        if (name === 'on' && newValue !== null) {\n            if (this.hasAttribute('off')) this.removeAttribute('off');\n        } else if (name === 'off' && newValue !== null) {\n            if (this.hasAttribute('on')) this.removeAttribute('on');\n        }\n        // if both removed externally, default to off state\n        if (!this.hasAttribute('on') && !this.hasAttribute('off')) this.setAttribute('off', '');\n        this.updateIcon();\n    }\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.innerHTML = `\n      <style>${$9f1e96e839d699eb$exports}</style>\n      <div class=\"img-wrapper\"><img /></div>\n    `;\n        this.$icon = this.shadowRoot.querySelector('img');\n        this.updateIcon();\n        this.addEventListener('click', this.toggle);\n    }\n    get on() {\n        return this.hasAttribute('on');\n    }\n    set on(value) {\n        if (value) {\n            this.setAttribute('on', '');\n            this.removeAttribute('off');\n        } else {\n            this.setAttribute('off', '');\n            this.removeAttribute('on');\n        }\n        this.updateIcon();\n    }\n    toggle = ()=>{\n        this.on = !this.on;\n        this.on ? this.dispatchUnmute() : this.dispatchMute();\n    };\n    dispatchMute() {\n        const event = new CustomEvent('audio-mute', {\n            bubbles: true,\n            composed: true\n        });\n        this.dispatchEvent(event);\n    }\n    dispatchUnmute() {\n        const event = new CustomEvent('audio-unmute', {\n            bubbles: true,\n            composed: true\n        });\n        this.dispatchEvent(event);\n    }\n    updateIcon() {\n        // derive state only from 'on' attribute\n        const isOn = this.hasAttribute('on');\n        const iconSrc = isOn ? 'ui/volume.svg' : 'ui/volume-slash.svg';\n        this.$icon.src = `images/${iconSrc}`;\n        this.$icon.alt = isOn ? 'Sound On' : 'Sound Off';\n    }\n}\ncustomElements.define('audio-toggle', $9849d1cdd885665c$var$AudioToggle);\n\n\n/*\n * Web component button to toggle full-screen mode\n *\n */ var $55e3bcfa2cb97214$exports = {};\n$55e3bcfa2cb97214$exports = \"*{box-sizing:border-box;margin:0;padding:0}:host{cursor:pointer;z-index:6;will-change:transform;background-color:#fff;border-radius:50%;width:48px;height:48px;transition:transform .12s,box-shadow .12s;display:block;box-shadow:0 2px 6px #0000004d}.img-wrapper{pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:flex}img{pointer-events:none;width:60%;height:60%;display:block}\";\n\n\nclass $671f9efa298aa28c$var$FullscreenToggle extends HTMLElement {\n    static get observedAttributes() {\n        return [\n            'fullscreen',\n            'windowed'\n        ];\n    }\n    attributeChangedCallback(name, _oldValue, newValue) {\n        // normalize: ensure only one of 'fullscreen' or 'windowed'\n        if (name === 'fullscreen' && newValue !== null) {\n            if (this.hasAttribute('windowed')) this.removeAttribute('windowed');\n        } else if (name === 'windowed' && newValue !== null) {\n            if (this.hasAttribute('fullscreen')) this.removeAttribute('fullscreen');\n        }\n        // if both removed externally, default to windowed state\n        if (!this.hasAttribute('fullscreen') && !this.hasAttribute('windowed')) this.setAttribute('windowed', '');\n        this.updateIcon();\n    }\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.innerHTML = `\n      <style>${$55e3bcfa2cb97214$exports}</style>\n      <div class=\"img-wrapper\"><img /></div>\n    `;\n        this.$icon = this.shadowRoot.querySelector('img');\n        this.updateIcon();\n        this.addEventListener('click', this.toggle);\n    }\n    get fullscreen() {\n        return this.hasAttribute('fullscreen');\n    }\n    set fullscreen(value) {\n        if (value) {\n            this.setAttribute('fullscreen', '');\n            this.removeAttribute('windowed');\n        } else {\n            this.setAttribute('windowed', '');\n            this.removeAttribute('fullscreen');\n        }\n        this.updateIcon();\n    }\n    toggle = ()=>{\n        this.fullscreen = !this.fullscreen;\n        this.fullscreen ? this.dispatchEnterFullScreen() : this.dispatchExitFullScreen();\n    };\n    dispatchEnterFullScreen() {\n        const event = new CustomEvent('enter-fullscreen', {\n            bubbles: true,\n            composed: true\n        });\n        this.dispatchEvent(event);\n    }\n    dispatchExitFullScreen() {\n        const event = new CustomEvent('exit-fullscreen', {\n            bubbles: true,\n            composed: true\n        });\n        this.dispatchEvent(event);\n    }\n    updateIcon() {\n        if (this.fullscreen) {\n            this.$icon.src = 'images/ui/minimize.svg';\n            this.$icon.alt = 'Exit full-screen';\n        } else {\n            this.$icon.src = 'images/ui/maximize.svg';\n            this.$icon.alt = 'Enter full-screen';\n        }\n    }\n}\ncustomElements.define('fullscreen-toggle', $671f9efa298aa28c$var$FullscreenToggle);\n\n\n/*\n * Web component to play infiniate iterations through a sequence of images\n *\n */ var $8daf36ba1006cee5$exports = {};\n$8daf36ba1006cee5$exports = \"*{box-sizing:border-box;margin:0;padding:0}:host{pointer-events:none;display:block;position:absolute}canvas{display:block}\";\n\n\nclass $7ca3b108dbac198a$var$AnimationSequence extends HTMLElement {\n    static get observedAttributes() {\n        return [\n            'top',\n            'left'\n        ];\n    }\n    /**\n   * @param {Object} obj - Configuration object for the animation, example:\n   * {\n   *   position: { top: 100, left: 200 },\n   *   size: { width: 300, height: 200 },\n   *   filenames: ['frame1.png', 'frame2.png', ...],\n   *   images: [ImageObject, ...],\n   *   sequence: [0,1,2,1,...]\n   * }\n   */ set config(obj) {\n        this._config = obj;\n        this.onConfigUpdate();\n    }\n    get config() {\n        if (!this._config) throw new Error('[CalendarDoor] config object not set');\n        return this._config;\n    }\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.innerHTML = `\n      <style>${$8daf36ba1006cee5$exports}</style>\n      <canvas></canvas>\n    `;\n        this.$canvas = this.shadowRoot.querySelector('canvas');\n        this.ctx = this.$canvas.getContext('2d');\n    }\n    onTick = (frameIndex)=>{\n        try {\n            this.renderFrame(this.config.sequence[frameIndex]);\n        } catch (e) {\n            console.error('Error rendering animation frame:', e);\n        }\n    };\n    async onConfigUpdate() {\n        this.style.top = `${this.config.position.top}px`;\n        this.style.left = `${this.config.position.left}px`;\n        this.style.width = `${this.config.size.width}px`;\n        this.style.height = `${this.config.size.height}px`;\n        this.$canvas.width = this.config.size.width;\n        this.$canvas.height = this.config.size.height;\n        this.renderFrame(0);\n    }\n    renderFrame(frameIndex) {\n        const img = this.config.images[frameIndex];\n        if (img) {\n            this.ctx.clearRect(0, 0, this.$canvas.width, this.$canvas.height);\n            this.ctx.drawImage(img, 0, 0, this.$canvas.width, this.$canvas.height);\n        }\n    }\n}\ncustomElements.define('animation-sequence', $7ca3b108dbac198a$var$AnimationSequence);\n\n\n/*\n * The context manager singleton handles transitions between different contexts\n *\n */ class $ae8074836ba6c190$var$ContextManager {\n    current = null;\n    change(context) {\n        if (this.current) this.current.exit();\n        this.current = context;\n        this.current.enter();\n    }\n}\nconst $ae8074836ba6c190$export$d7af6644c1ae904e = new $ae8074836ba6c190$var$ContextManager();\n\n\nclass $7266ce296d18dd72$var$AudioPlayer {\n    constructor(){\n        this.locked = true;\n        this.audioCtx = null;\n        this.masterGain = null;\n        this.arrayBuffers = {};\n        this.audioBuffers = {};\n        this.activeSources = {\n            sounds: {},\n            tracks: {}\n        };\n        this.manualPause = false;\n    }\n    async init() {\n        if (this.audioCtx) return;\n        this.audioCtx = new AudioContext();\n        this.masterGain = this.audioCtx.createGain();\n        this.masterGain.gain.value = 1.0;\n        this.masterGain.connect(this.audioCtx.destination);\n        if (this.audioCtx.state === 'suspended') await this.audioCtx.resume();\n        await this.decodeBuffers();\n        this.locked = false;\n    }\n    get isPaused() {\n        return this.audioCtx ? this.audioCtx.state === 'suspended' : true;\n    }\n    async playSound(name, { volume: volume } = {}) {\n        return this._play(name, 'sounds', {\n            volume: volume\n        });\n    }\n    async playAmbienceTrack(name, { volume: volume } = {}) {\n        return this._play(name, 'tracks', {\n            volume: volume,\n            loop: true\n        });\n    }\n    async stopAmbienceTrack(name) {\n        this._stop(name, 'tracks');\n    }\n    async _play(name, key, { volume: volume = 1.0, loop: loop = false } = {}) {\n        if (!this.audioCtx) return console.warn(`[AudioPlayer] audio context is locked`);\n        return new Promise((resolve)=>{\n            const source = this.audioCtx.createBufferSource();\n            source.buffer = this.audioBuffers[name];\n            source.loop = loop;\n            const gain = this.audioCtx.createGain();\n            gain.gain.value = Math.max(0, volume);\n            source.connect(gain);\n            gain.connect(this.masterGain);\n            source.start(0);\n            this.activeSources[key][name] = {\n                source: source,\n                gain: gain\n            };\n            source.onended = ()=>{\n                delete this.activeSources[key][name];\n                resolve();\n            };\n        });\n    }\n    _stop(name, key) {\n        if (!this.audioCtx) return console.warn(`[AudioPlayer] audio context locked`);\n        const entry = this.activeSources[key][name];\n        if (!entry) return;\n        entry.source.stop();\n    }\n    register(name, arrayBuffer) {\n        this.arrayBuffers[name] = arrayBuffer;\n    }\n    async pause(manual = false) {\n        if (!this.audioCtx) return console.warn('[AudioPlayer] cannot pause: audio context locked');\n        if (this.audioCtx.state === 'suspended') return;\n        await this.audioCtx.suspend();\n        if (manual) this.manualPause = true;\n    }\n    async resume(manual = false) {\n        if (!this.audioCtx) return console.warn('[AudioPlayer] cannot resume: audio context locked');\n        if (this.audioCtx.state === 'running') await this.audioCtx.resume();\n        if (this.manualPause && !manual) // do not auto-resume if manually paused\n        return;\n        // only resume ambience tracks; sound effects are one-shots\n        this.clearSources('sounds');\n        this.manualPause = false;\n        await this.audioCtx.resume();\n    }\n    clearSources(key) {\n        Object.keys(this.activeSources[key]).forEach((name)=>{\n            this._stop(name, key);\n        });\n    }\n    async decodeBuffers() {\n        if (!this.audioCtx) return console.warn('[AudioPlayer] cannot decode: audio context locked');\n        if (this.audioCtx.state !== 'running') await this.audioCtx.resume();\n        try {\n            await Promise.all(Object.entries(this.arrayBuffers).map(async ([name, arrayBuffer])=>{\n                const bufferCopy = arrayBuffer.slice(0);\n                const audioBuffer = await this.audioCtx.decodeAudioData(bufferCopy);\n                this.audioBuffers[name] = audioBuffer;\n            }));\n        } catch (error) {\n            return `Error during audio decoding: ${error.message}`;\n        }\n        this.arrayBuffers = {};\n    }\n}\nconst $7266ce296d18dd72$export$f16b8a82b5b3b0df = new $7266ce296d18dd72$var$AudioPlayer();\n\n\nconst $ebd6beae392135bb$var$ASSET_MAPPING_PATH = 'assets.json';\nconst $ebd6beae392135bb$var$IMAGE_BASE_PATH = 'images';\nconst $ebd6beae392135bb$export$fc653899649b17a5 = 'stage-initial';\nconst $ebd6beae392135bb$export$cc5531d45d460071 = 'stage-calendar-assets';\nconst $ebd6beae392135bb$export$ca8414d904262e8c = 'stage-package-thumbnails';\nconst $ebd6beae392135bb$export$6c0eb6ab21abd162 = 'stage-complete';\nclass $ebd6beae392135bb$var$AssetLoader {\n    loadingStage = $ebd6beae392135bb$export$fc653899649b17a5;\n    progress = 0;\n    progressCallbacks = [];\n    cachedImages = {};\n    cachedAudioBuffers = {};\n    audioInfo = {};\n    _assetMapping = null;\n    get assetMapping() {\n        if (!this._assetMapping) throw new Error('Asset mapping not loaded yet');\n        return Object.freeze(this._assetMapping);\n    }\n    get calendarAssetsReady() {\n        return [\n            $ebd6beae392135bb$export$ca8414d904262e8c,\n            $ebd6beae392135bb$export$6c0eb6ab21abd162\n        ].includes(this.loadingStage);\n    }\n    get packageThumbnailsReady() {\n        return this.loadingStage === $ebd6beae392135bb$export$6c0eb6ab21abd162;\n    }\n    async run() {\n        await this.loadAssetMapping();\n        await this.preloadCalendarAssets();\n        await this.preloadPackageThumbnails();\n        this.loadingStage = $ebd6beae392135bb$export$6c0eb6ab21abd162;\n    }\n    registerProgressCallback(key, cb) {\n        cb(this.loadingStage, this.progress);\n        this.progressCallbacks.push({\n            key: key,\n            cb: cb\n        });\n    }\n    unregisterProgressCallback(key) {\n        this.progressCallbacks = this.progressCallbacks.filter((item)=>item.key !== key);\n    }\n    // Load calendar assets with progress callback\n    // onProgress: function(stage, percent, done) => void\n    async preloadCalendarAssets() {\n        this.loadingStage = $ebd6beae392135bb$export$cc5531d45d460071;\n        const imageFilenames = [\n            this._assetMapping.background.filename,\n            ...this._assetMapping.doors.map((door)=>door.filename),\n            ...this._assetMapping.ui,\n            ...this._assetMapping.animations.flatMap(({ filenames: filenames })=>filenames),\n            ...this.doorNumbers()\n        ];\n        const audioFiles = this._assetMapping.audio;\n        let total = imageFilenames.length + audioFiles.length;\n        let count = 0;\n        await this.preloadImages(imageFilenames, ()=>{\n            count++;\n            this.onProgress(count, total);\n        });\n        await Promise.all(audioFiles.map(async ({ name: name, filename: filename, volume: volume })=>{\n            const buffer = await this.loadAudio(`audio/${filename}`);\n            (0, $7266ce296d18dd72$export$f16b8a82b5b3b0df).register(name, buffer);\n            count++;\n            this.audioInfo[name] = {\n                volume: volume\n            };\n            this.onProgress(count, total);\n        }));\n    }\n    doorNumbers() {\n        const numbers = [];\n        for(let i = 1; i <= 24; i++)numbers.push(`door-numbers/${i.toString()}.webp`);\n        return numbers;\n    }\n    onProgress(loaded, total) {\n        const progress = total === 0 ? 0 : Math.floor(loaded / total * 100);\n        this.progress = progress;\n        this.progressCallbacks.forEach(({ cb: cb })=>cb(this.loadingStage, progress, progress === 100));\n    }\n    getImage(filename) {\n        const img = this.cachedImages[filename];\n        if (!img) throw new Error(`[AssetLoader] image not cached: ${filename}`);\n        return img;\n    }\n    async preloadPackageThumbnails() {\n        this.loadingStage = $ebd6beae392135bb$export$ca8414d904262e8c;\n        const imageFilenames = this._assetMapping.doors.map(({ packageId: packageId })=>this._assetMapping.packages[packageId]?.thumbnail);\n        await $ebd6beae392135bb$export$5065893894c18576.preloadImages(imageFilenames, (loaded, total)=>{\n            const progress = total === 0 ? 0 : Math.floor(loaded / total * 100);\n            this.progress = progress;\n            this.progressCallbacks.forEach(({ cb: cb })=>cb(this.loadingStage, progress, progress === 100));\n        });\n    }\n    async preloadImages(filenames, onProgress) {\n        let total = filenames.length;\n        let loaded = 0;\n        const imagePromises = filenames.map((filename)=>this.preloadImage(`${$ebd6beae392135bb$var$IMAGE_BASE_PATH}/${filename}`).then((img)=>{\n                this.cachedImages[filename] = img;\n                loaded++;\n                if (onProgress) onProgress(loaded, total);\n                return img;\n            }));\n        await Promise.all(imagePromises);\n    }\n    async preloadImage(src) {\n        return new Promise((resolve, reject)=>{\n            const img = new Image();\n            img.onload = ()=>resolve(img);\n            img.onerror = ()=>reject(new Error(`[AssetLoader] failed to load image: ${src}`));\n            img.src = src;\n        });\n    }\n    // Loads audio files and converts them to AudioBuffers.\n    // This can be done even when the AudioContext is suspended.\n    async loadAudio(src) {\n        const raw = await fetch(src);\n        return await raw.arrayBuffer();\n    }\n    async loadAssetMapping() {\n        const response = await fetch($ebd6beae392135bb$var$ASSET_MAPPING_PATH);\n        this._assetMapping = await response.json();\n    }\n    async refreshImage(src) {\n        const img = this.cachedImages[src];\n        if (!img) throw new Error(`[AssetLoader] image not cached: ${src}`);\n        try {\n            await img.decode();\n        } catch  {\n        // ignore decode errors\n        }\n    }\n}\nconst $ebd6beae392135bb$export$5065893894c18576 = new $ebd6beae392135bb$var$AssetLoader();\n\n\n\n\n/*\n * Manage interaction with localStorage\n *\n */ const $744d2dad838f829a$var$OPENED_KEY = 'opened-doors';\nconst $744d2dad838f829a$var$POSITION_KEY = 'last-position';\nfunction $744d2dad838f829a$export$c1f3eed3acb3926c(position) {\n    const data = JSON.stringify(position);\n    localStorage.setItem($744d2dad838f829a$var$POSITION_KEY, data);\n}\nfunction $744d2dad838f829a$export$69aa193b2fdde4f() {\n    const data = localStorage.getItem($744d2dad838f829a$var$POSITION_KEY);\n    if (!data) return null;\n    try {\n        return JSON.parse(data);\n    } catch  {\n        return null;\n    }\n}\nfunction $744d2dad838f829a$export$b95c526184eb784a(openedDoors) {\n    const data = JSON.stringify(openedDoors);\n    localStorage.setItem($744d2dad838f829a$var$OPENED_KEY, data);\n}\nfunction $744d2dad838f829a$export$c1c9dbe35684b951() {\n    const data = localStorage.getItem($744d2dad838f829a$var$OPENED_KEY);\n    if (!data) return {};\n    try {\n        return JSON.parse(data);\n    } catch  {\n        return {};\n    }\n}\n\n\nclass $84923368ea4a1ab4$var$UI {\n    $app = null;\n    $animations = [];\n    constructor(){\n        this.$app = this.selectElement('#app');\n    }\n    revealCalendar() {\n        this.selectElement('#title-screen').remove();\n    }\n    async renderCalendarAssets() {\n        const assets = (0, $ebd6beae392135bb$export$5065893894c18576).assetMapping;\n        const $snow = this.selectElement('#snow-overlay');\n        const $calendar = $84923368ea4a1ab4$export$5525e5ba287fa6f5.selectElement('#calendar');\n        await this.renderBackground($snow, $calendar, assets);\n        this.renderDoors($calendar, assets);\n        this.renderAnimations($calendar, assets);\n    }\n    restoreLastPosition() {\n        const pos = (0, $744d2dad838f829a$export$69aa193b2fdde4f)();\n        if (pos) this.selectElement('#pan-container').scrollToPosition(pos);\n        else this.selectElement('#pan-container').scrollToInitial();\n    }\n    async renderBackground($snow, $calendar, { background: background }) {\n        // ensure the image is loaded before applying to avoid flicker\n        await (0, $ebd6beae392135bb$export$5065893894c18576).refreshImage(background.filename);\n        $snow.setAttribute('width', background.width);\n        $snow.setAttribute('height', background.height);\n        $calendar.style.backgroundImage = `url('images/${background.filename}')`;\n        $calendar.style.width = `${background.width}px`;\n        $calendar.style.height = `${background.height}px`;\n    }\n    startSnow(flakeCount) {\n        const $snow = this.selectElement('#snow-overlay');\n        $snow.startSnow(flakeCount);\n    }\n    renderDoors($calendar, { doors: doors }) {\n        $calendar.innerHTML = '';\n        doors.forEach((door)=>$calendar.appendChild(this.buildDoorElement(door)));\n    }\n    renderAnimations($calendar, { animations: animations }) {\n        animations.forEach((animation)=>{\n            const $animation = document.createElement('animation-sequence');\n            $animation.config = {\n                ...animation,\n                images: animation.filenames.map((filename)=>(0, $ebd6beae392135bb$export$5065893894c18576).getImage(filename))\n            };\n            $calendar.appendChild($animation);\n            this.$animations.push($animation);\n        });\n    }\n    updateAnimations(frameIndex) {\n        this.$animations.forEach(($animation)=>{\n            $animation.onTick(frameIndex);\n        });\n    }\n    // @param {Object} openedDoors - map of door IDs that are opened\n    // e.g. { door-1: true, door-3: true }\n    reopenDoors(openedDoors = {}) {\n        Object.keys(openedDoors).forEach((doorId)=>{\n            const $door = this.selectElement(`#${doorId}`);\n            $door.open();\n        });\n    }\n    buildDoorElement(door) {\n        const $door = document.createElement('calendar-door');\n        $door.config = door;\n        return $door;\n    }\n    handleForbiddenDoor($door) {\n        $door.shake();\n        this.playSound('forbidden');\n    }\n    async playSound(name) {\n        if ((0, $7266ce296d18dd72$export$f16b8a82b5b3b0df).isPaused) return;\n        await (0, $7266ce296d18dd72$export$f16b8a82b5b3b0df).playSound(name, {\n            volume: (0, $ebd6beae392135bb$export$5065893894c18576).audioInfo[name]?.volume || 1.0\n        });\n    }\n    playAmbience() {\n        (0, $7266ce296d18dd72$export$f16b8a82b5b3b0df).playAmbienceTrack('wind');\n    }\n    stopAmbience() {\n        (0, $7266ce296d18dd72$export$f16b8a82b5b3b0df).stopAmbienceTrack('wind');\n    }\n    updateProgressBar($bar, progress, minValue = 2) {\n        // showing at least minValue indicates activity\n        $bar.setAttribute('value', Math.max(progress, minValue));\n    }\n    configurePackages() {\n        (0, $ebd6beae392135bb$export$5065893894c18576).assetMapping.doors.forEach((door)=>{\n            const $door = $84923368ea4a1ab4$export$5525e5ba287fa6f5.selectElement(`#${door.id}`);\n            const pkg = (0, $ebd6beae392135bb$export$5065893894c18576).assetMapping.packages[door.packageId];\n            $door.packageConfig = pkg;\n        });\n    }\n    enterFullscreen() {\n        if (document.fullscreenElement) return;\n        this.$app.requestFullscreen();\n    }\n    exitFullscreen() {\n        if (!document.fullscreenElement) return;\n        document.exitFullscreen();\n    }\n    selectElement(selector) {\n        const $el = document.querySelector(selector);\n        if (!$el) throw new Error(`UI element not found: ${selector}`);\n        return $el;\n    }\n}\nconst $84923368ea4a1ab4$export$5525e5ba287fa6f5 = new $84923368ea4a1ab4$var$UI();\n\n\n\n\n\n\n/*\n * Game-loop based timer that emits 'tick' events at a regular interval.\n *\n */ class $01ccc13c74d3501f$var$Timer {\n    // 8 ticks per two seconds\n    dt = 0;\n    counter = 0;\n    maxCounter = 8;\n    cutoff = 2 / 8 * 1000;\n    prevTime = 0;\n    ref = 0;\n    run = (time)=>{\n        if (this.prevTime > 0) {\n            this.dt += time - this.prevTime;\n            if (this.dt >= this.cutoff) {\n                this.dt %= this.cutoff;\n                this.counter = (this.counter + 1) % this.maxCounter;\n                this.tick();\n            }\n        }\n        this.prevTime = time;\n        this.ref = requestAnimationFrame(this.run);\n    };\n    tick() {\n        document.dispatchEvent(new CustomEvent('tick', {\n            detail: {\n                i: this.counter\n            }\n        }));\n    }\n}\nconst $01ccc13c74d3501f$export$9dc4ecf953986f04 = new $01ccc13c74d3501f$var$Timer();\n\n\n\nclass $2fb7d8d12e1f1bff$export$3b805cea1f178355 {\n    key = 'calendar-context';\n    openedDoors = {};\n    $calendar = null;\n    constructor(){\n        this.startX = 0;\n        this.startY = 0;\n        this.dx = 0;\n        this.dy = 0;\n        this.walkX = 0;\n        this.walkY = 0;\n        this.maxX = 2560;\n        this.maxY = 1440;\n        this.borderSize = 50;\n        this.dragging = false;\n    }\n    async enter() {\n        this.openedDoors = (0, $744d2dad838f829a$export$c1c9dbe35684b951)();\n        await this.render();\n        this.player = (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).selectElement('#media-player');\n        this.$calendar = (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).selectElement('#calendar');\n        this.$frame = (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).selectElement('#panic-container');\n        this.$content = (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).selectElement('.pan-content');\n        this.setStartPosition(1100, 200);\n        this.registerListeners();\n        this.prepareContentPackages();\n        this.startAnimationTimer();\n        (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).revealCalendar();\n    }\n    exit() {\n        this.removeListeners();\n    }\n    async render() {\n        await (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).renderCalendarAssets();\n        (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).reopenDoors(this.openedDoors);\n        (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).startSnow(400);\n        await (0, $7266ce296d18dd72$export$f16b8a82b5b3b0df).decodeBuffers();\n        (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).playAmbience();\n    }\n    onCalendarClick = (event)=>{\n        const $door = event.target.closest('[data-door]');\n        if ($door) {\n            event.preventDefault();\n            return this.onDoorClick($door);\n        }\n        const $content = event.target.closest('[data-content]');\n        if ($content) $content.displayContent();\n    };\n    onDoorClick($door) {\n        if (!$door.mayOpen()) return (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).handleForbiddenDoor($door);\n        this.openedDoors[$door.id] = true;\n        (0, $744d2dad838f829a$export$b95c526184eb784a)(this.openedDoors);\n        $door.open();\n        (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).playSound('door');\n    }\n    onShowPlayer = (event)=>{\n        (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).stopAmbience();\n        this.player.displayImage(event);\n    };\n    onPlayerClosed = ()=>{\n        (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).playAmbience();\n    };\n    onAudioMute = async ()=>{\n        await (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).playSound('click');\n        (0, $7266ce296d18dd72$export$f16b8a82b5b3b0df).pause(true);\n    };\n    onAudioUnmute = ()=>{\n        (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).playSound('click');\n        (0, $7266ce296d18dd72$export$f16b8a82b5b3b0df).resume(true);\n    };\n    onEnterFullscreen = ()=>{\n        (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).enterFullscreen();\n    };\n    onExitFullscreen = ()=>{\n        (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).exitFullscreen();\n    };\n    onVisibilityChange = ()=>{\n        if (document.hidden) (0, $7266ce296d18dd72$export$f16b8a82b5b3b0df).pause();\n        else (0, $7266ce296d18dd72$export$f16b8a82b5b3b0df).resume();\n    };\n    onTick = (e)=>{\n        (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).updateAnimations(e.detail.i);\n    };\n    onKeyDown = (e)=>{\n        if (e.code === 'Space') e.preventDefault();\n    };\n    onPanUpdate = (e)=>{\n        (0, $744d2dad838f829a$export$c1f3eed3acb3926c)({\n            x: e.detail.scrollLeft,\n            y: e.detail.scrollTop\n        });\n    };\n    prepareContentPackages() {\n        (0, $ebd6beae392135bb$export$5065893894c18576).packageThumbnailsReady ? (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).configurePackages() : (0, $ebd6beae392135bb$export$5065893894c18576).registerProgressCallback(this.key, this.onLoadingProgress);\n    }\n    onLoadingProgress = (stage, _, done)=>{\n        if (stage !== (0, $ebd6beae392135bb$export$ca8414d904262e8c)) return;\n        if (!done) return;\n        (0, $ebd6beae392135bb$export$5065893894c18576).unregisterProgressCallback(this.key);\n        (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).configurePackages();\n    };\n    startAnimationTimer() {\n        (0, $01ccc13c74d3501f$export$9dc4ecf953986f04).run();\n    }\n    setStartPosition(x, y) {\n        this.shift(-x, -y);\n        this.dx = -x;\n        this.dy = -y;\n        this.walkX = 0;\n        this.walkY = 0;\n    }\n    shift(dx, dy) {\n        const frameWidth = this.$frame.clientWidth || window.innerWidth;\n        this.walkX = Math.min(dx, -this.dx + this.borderSize);\n        this.walkX = Math.max(this.walkX, frameWidth - this.borderSize - this.maxX - this.dx);\n        const frameHeight = this.$frame.clientHeight || window.innerHeight;\n        this.walkY = Math.min(dy, -this.dy + this.borderSize);\n        this.walkY = Math.max(this.walkY, frameHeight - this.borderSize - this.maxY - this.dy);\n        const offsetX = this.dx + this.walkX;\n        const offsetY = this.dy + this.walkY;\n        this.$content.style.transform = `translate(${offsetX}px, ${offsetY}px)`;\n    }\n    onWindowResize = ()=>{\n        this.shift(this.walkX, this.walkY);\n    };\n    onPointerDown = (e)=>{\n        if (e.composedPath().some((el)=>el?.hasAttribute?.('data-door'))) return;\n        if (e.composedPath().some((el)=>el?.hasAttribute?.('data-content'))) return;\n        this.dragging = true;\n        this.$frame.setPointerCapture(e.pointerId);\n        this.startX = e.clientX;\n        this.startY = e.clientY;\n    };\n    onPointerMove = (e)=>{\n        if (this.dragging) this.shift(e.clientX - this.startX, e.clientY - this.startY);\n    };\n    onDragEnd = (e)=>{\n        this.dragging = false;\n        this.dx += this.walkX;\n        this.dy += this.walkY;\n        this.walkX = 0;\n        this.walkY = 0;\n        this.$frame.releasePointerCapture(e.pointerId);\n    };\n    registerListeners() {\n        this.$calendar.addEventListener('click', this.onCalendarClick);\n        document.addEventListener('show-player', this.onShowPlayer);\n        document.addEventListener('player-closed', this.onPlayerClosed);\n        document.addEventListener('audio-mute', this.onAudioMute);\n        document.addEventListener('audio-unmute', this.onAudioUnmute);\n        document.addEventListener('enter-fullscreen', this.onEnterFullscreen);\n        document.addEventListener('exit-fullscreen', this.onExitFullscreen);\n        document.addEventListener('visibilitychange', this.onVisibilityChange);\n        document.addEventListener('keydown', this.onKeyDown);\n        document.addEventListener('tick', this.onTick);\n        document.addEventListener('pan-update', this.onPanUpdate);\n        this.$frame.addEventListener('pointerdown', this.onPointerDown);\n        this.$frame.addEventListener('pointermove', this.onPointerMove);\n        this.$frame.addEventListener('pointerup', this.onDragEnd);\n        this.$frame.addEventListener('pointercancel', this.onDragEnd);\n        window.addEventListener('resize', this.onWindowResize);\n    }\n    removeListeners() {\n        this.$calendar.removeEventListener('click', this.onCalendarClick);\n        document.removeEventListener('show-player', this.onShowPlayer);\n        document.removeEventListener('player-closed', this.onPlayerClosed);\n        document.removeEventListener('audio-mute', this.onAudioMute);\n        document.removeEventListener('audio-unmute', this.onAudioUnmute);\n        document.removeEventListener('enter-fullscreen', this.onEnterFullscreen);\n        document.removeEventListener('exit-fullscreen', this.onExitFullscreen);\n        document.removeEventListener('visibilitychange', this.onVisibilityChange);\n        document.removeEventListener('keydown', this.onKeyDown);\n        document.removeEventListener('tick', this.onTick);\n        document.removeEventListener('pan-update', this.onPanUpdate);\n        this.$frame.removeEventListener('pointerdown', this.onPointerDown);\n        this.$frame.removeEventListener('pointermove', this.onPointerMove);\n        this.$frame.removeEventListener('pointerup', this.onDragEnd);\n        this.$frame.removeEventListener('pointercancel', this.onDragEnd);\n        window.removeEventListener('resize', this.onWindowResize);\n    }\n}\n\n\nclass $974499473389885d$export$504237e456b00092 {\n    key = 'title-context';\n    loadingProgress = 0;\n    autoSwitch = false;\n    $startBtn = null;\n    $progressBar = null;\n    enter() {\n        this.$startBtn = (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).selectElement('#start-button');\n        this.$progressBar = (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).selectElement('#progress-bar');\n        (0, $ebd6beae392135bb$export$5065893894c18576).registerProgressCallback(this.key, this.onLoadingProgress);\n        (0, $ebd6beae392135bb$export$5065893894c18576).run();\n        this.registerListeners();\n    }\n    exit() {\n        this.removeListeners();\n    }\n    onLoadingProgress = (stage, progress, done)=>{\n        if (stage !== (0, $ebd6beae392135bb$export$cc5531d45d460071)) return;\n        this.loadingProgress = progress;\n        if (!this.autoSwitch) return;\n        this.updateProgressBar();\n        if (!done) return;\n        (0, $ebd6beae392135bb$export$5065893894c18576).unregisterProgressCallback(this.key);\n        // Small delay to let users see 100% completion\n        setTimeout(this.goToCalendar, 1200);\n    };\n    onStartClick = ()=>{\n        (0, $ebd6beae392135bb$export$5065893894c18576).calendarAssetsReady ? this.goToCalendar() : this.waitForPreload();\n    };\n    waitForPreload = ()=>{\n        this.$startBtn.classList.add('hide');\n        this.$progressBar.classList.remove('hide');\n        this.autoSwitch = true;\n        // give the bar a chance to render with width 0 first to enable transition\n        setTimeout(this.updateProgressBar, 0);\n    };\n    goToCalendar = ()=>{\n        (0, $ae8074836ba6c190$export$d7af6644c1ae904e).change(new (0, $2fb7d8d12e1f1bff$export$3b805cea1f178355)());\n    };\n    updateProgressBar = ()=>{\n        (0, $84923368ea4a1ab4$export$5525e5ba287fa6f5).updateProgressBar(this.$progressBar, this.loadingProgress);\n    };\n    registerListeners() {\n        this.$startBtn.addEventListener('click', this.onStartClick);\n    }\n    removeListeners() {\n        this.$startBtn.removeEventListener('click', this.onStartClick);\n    }\n}\n\n\n\nconst $2b6e161c9edcf319$var$main = ()=>{\n    if (location.hash === '#reset') localStorage.clear();\n    (0, $ae8074836ba6c190$export$d7af6644c1ae904e).change(new (0, $974499473389885d$export$504237e456b00092)());\n};\ndocument.addEventListener('DOMContentLoaded', $2b6e161c9edcf319$var$main, {\n    once: true\n});\nconst $2b6e161c9edcf319$var$initAudio = ()=>{\n    (0, $7266ce296d18dd72$export$f16b8a82b5b3b0df).init();\n    document.removeEventListener('click', $2b6e161c9edcf319$var$initAudio);\n};\ndocument.addEventListener('click', $2b6e161c9edcf319$var$initAudio);\n\n\n//# sourceMappingURL=xmasmisfits.0300545e.js.map\n","import './components/calendar-door/calendar-door.js'\nimport './components/pan-container/pan-container.js'\nimport './components/progress-bar/progress-bar.js'\nimport './components/media-player/media-player.js'\nimport './components/loading-spinner/loading-spinner.js'\nimport './components/blur-overlay/blur-overlay.js'\nimport './components/snow-overlay/snow-overlay.js'\nimport './components/audio-toggle/audio-toggle.js'\nimport './components/fullscreen-toggle/fullscreen-toggle.js'\nimport './components/animation-sequence/animation-sequence.js'\n\nimport { contextManager } from './contexts/context-manager.js'\nimport { TitleContext } from './contexts/title-context.js'\nimport { audioPlayer } from './audio-player.js'\n\nconst main = () => {\n  if (location.hash === '#reset') {\n    localStorage.clear()\n  }\n\n  contextManager.change(new TitleContext())\n}\n\ndocument.addEventListener('DOMContentLoaded', main, { once: true })\n\nconst initAudio = () => {\n  audioPlayer.init()\n  document.removeEventListener('click', initAudio)\n}\n\ndocument.addEventListener('click', initAudio)\n","/*\n * Web component that prepares a calendar door element, incluing data\n * loading, opening animation, and content display.\n *\n */\n\nimport { template } from './template.js'\nimport { allowOpen } from '../../utils.js'\n\n/**\n * @element calendar-door\n * @summary A calendar door that can be opened to reveal content.\n *\n * @fires show-player - Fired when the door content is clicked to display the player.\n * The event detail contains an object: { src: string } with the content source URL.\n *\n * @part label-container - The container element for the door label.\n * @part door-content - The content area revealed when the door is opened.\n */\nclass CalendarDoor extends HTMLElement {\n  /**\n   * @property {Object} config - Configuration object for the door, example:\n   * {\n   *   id: 'door-01',\n   *   label: '1',\n   *   position: { x: 100, y: 200 },\n   *   size: { width: 91, height: 131 },\n   *   direction: 'right', // (optional, missing indicates left)\n   *   filename: 'doors/door-01.png',\n   *   packageId: 'package-01'\n   * }\n   */\n  static get observedAttributes () {\n    return ['preload']\n  }\n\n  set config (obj) {\n    this._config = obj\n    this.update()\n  }\n\n  get config () {\n    if (!this._config) {\n      throw new Error('[CalendarDoor] config object not set')\n    }\n    return this._config\n  }\n\n  /**\n   * @property {Object} packageConfig - Configuration object for the package\n   * associated with this door. Example:\n   * {\n   *   thumbnail: 'packages/record-01.webp',\n   *   src: 'https://example.com/xyz',\n   * }\n   */\n  set packageConfig (pkg) {\n    this._packageConfig = pkg\n    this.updatePackage()\n  }\n\n  get packageConfig () {\n    if (!this._packageConfig) {\n      throw new Error('[CalendarDoor] packageConfig object not set')\n    }\n    return this._packageConfig\n  }\n\n  constructor () {\n    super()\n    this.attachShadow({ mode: 'open' })\n    this.shadowRoot.appendChild(template.content.cloneNode(true))\n    this.$doorFrame = this.shadowRoot.querySelector('#door-frame')\n    this.$doorLabel = this.shadowRoot.querySelector('#label-text')\n    this.$doorContent = this.shadowRoot.querySelector('#door-content')\n  }\n\n  connectedCallback () {\n    this.dataset.interactive = ''\n    this.dataset.door = ''\n    this.update()\n  }\n\n  attributeChangedCallback (name, _oldValue, newValue) {\n    if (name === 'open' && newValue !== null) {\n      return this.openDoor()\n    }\n    this.update()\n  }\n\n  update () {\n    this.id = this.config.id\n\n    const { top, left } = this.config.position || {}\n    const { width, height } = this.config.size || {}\n    this.style.width = `${width}px`\n    this.style.height = `${height}px`\n    this.style.top = `${top}px`\n    this.style.left = `${left}px`\n\n    const frameUrl = `images/${this.config.filename}`\n    const labelUrl = `images/door-numbers/${this.config.label}.webp`\n    this.$doorFrame.style.backgroundImage = `url(${frameUrl})`\n    this.$doorLabel.style.backgroundImage = `url(${labelUrl})`\n  }\n\n  updatePackage () {\n    const imgSrc = this.packageConfig.thumbnail\n    this.$doorContent.style.backgroundImage = `url('images/${imgSrc}')`\n    this.$doorContent.querySelector('#play-icon').classList.remove('hide')\n  }\n\n  openIfAllowed () {\n    if (this.mayOpen()) this.open()\n  }\n\n  mayOpen () {\n    return allowOpen(this.config.label)\n  }\n\n  shake () {\n    this.$doorFrame.classList.remove('shake')\n    void this.offsetWidth // force reflow to restart CSS animation\n    this.$doorFrame.classList.add('shake')\n  }\n\n  open () {\n    const width = this.config.size.width\n    const direction = this.config.direction || 'left'\n    const dx = direction === 'left' ? `-${width - 2}px` : `${width - 2}px`\n    this.$doorFrame.style.transform = `translateX(${dx})`\n    this.$doorFrame.classList.add('open')\n    this.removeAttribute('data-door')\n    this.setAttribute('open', 'true')\n    this.dataset.content = ''\n  }\n\n  displayContent () {\n    this.dispatchEvent(\n      new CustomEvent('show-player', {\n        bubbles: true,\n        composed: true,\n        detail: { src: this.packageConfig.src }\n      })\n    )\n  }\n}\n\ncustomElements.define('calendar-door', CalendarDoor)\n","import * as css from 'bundle-text:./calendar-door.css'\n\nexport const template = document.createElement('template')\n\ntemplate.innerHTML = `\n  <style>${css}</style>\n\n  <main>\n    <div part=\"door-backdrop\" class=\"door-backdrop\">\n      <loading-spinner></loading-spinner>\n    </div>\n\n    <div class=\"content-wrapper\">\n      <div id=\"door-content\" class=\"door-content\">\n        <div id=\"play-icon\" class=\"play-icon hide\" tabindex=\"0\" role=\"button\" aria-label=\"Play\">\n        </div>\n      </div>\n    </div>\n\n    <div id=\"door-frame\" class=\"door-frame\">\n      <div class=\"label-container\" part=\"label-container\">\n        <div id=\"label-text\" class=\"label-text\"></div>\n      </div>\n    </div>\n  </main>\n`\n","module.exports = \"21a268a05bdeba10\";","/*\n * Various helper functions\n *\n */\n\nexport const allowOpen = doorLabel => {\n  const now = new Date()\n  const year = now.getFullYear()\n  if (year > 2025) return true\n\n  const maxDay = now.getDate()\n  const day = parseInt(doorLabel, 10)\n\n  return !isNaN(day) && day <= maxDay\n}\n\nexport const debug = message => {\n  const $debug = document.getElementById('debug')\n  if ($debug) {\n    $debug.textContent = message\n  } else {\n    console.log('[Debug]', message)\n  }\n}\n","/*\n * Web component to pan around an HTML element by clicking and dragging\n *\n */\n\nimport { template } from './template.js'\n\n/**\n * @element pan-container\n * @summary A container that allows panning of larger content by click-and-drag.\n *\n * Elements within the container that have the `data-interactive`\n * attribute will be exempt from the drag-to-pan operation.\n * This allows interactive child elements (such as buttons, links, or inputs)\n * to receive pointer events without triggering panning.\n */\nclass PanContainer extends HTMLElement {\n  isDown = false\n  startX = 0\n  startY = 0\n  scrollLeft = 0\n  scrollTop = 0\n\n  constructor () {\n    super()\n    this.attachShadow({ mode: 'open' })\n    this.shadowRoot.appendChild(template.content.cloneNode(true))\n    this.$container = this.shadowRoot.querySelector('main')\n  }\n\n  connectedCallback () {\n    this.registerListeners()\n  }\n\n  disconnectedCallback () {\n    this.removeListeners()\n  }\n\n  scrollToInitial () {\n    const { scrollWidth, clientWidth, scrollHeight, clientHeight } =\n      this.$container\n    const centerX = (scrollWidth - clientWidth) / 2\n    const centerY = (scrollHeight - clientHeight) / 2\n    this.$container.scrollTo(centerX, centerY - 60)\n  }\n\n  scrollToPosition ({ x, y }) {\n    this.$container.scrollTo(x, y)\n  }\n\n  startPan = e => {\n    if (e.target.closest('[data-interactive]')) return\n    this.isDown = true\n    this.$container.classList.add('active')\n    this.startX = e.clientX\n    this.startY = e.clientY\n    this.scrollLeft = this.$container.scrollLeft\n    this.scrollTop = this.$container.scrollTop\n    // For native scrolling, pointer capture is not needed; comment it out\n    // this.$container.setPointerCapture(e.pointerId)\n  }\n\n  updatePan = e => {\n    // With native scrolling, do not manually set scrollLeft/Top.\n    // Keep this if you still want desktop mouse-drag behavior,\n    // but on touch devices Safari won't deliver pointermove reliably.\n    if (!this.isDown) return\n    // e.preventDefault() can block native scroll; remove it for iOS touch\n    // e.preventDefault()\n    const x = e.clientX\n    const y = e.clientY\n    const walkX = x - this.startX\n    const walkY = y - this.startY\n    // On touch, let native scrolling do the work.\n    // On desktop mouse, you may still want manual panning:\n    if (e.pointerType === 'mouse') {\n      this.$container.scrollLeft = this.scrollLeft - walkX\n      this.$container.scrollTop = this.scrollTop - walkY\n    }\n  }\n\n  stopPan = e => {\n    this.isDown = false\n    this.$container.classList.remove('active')\n    // this.$container.releasePointerCapture(e.pointerId)\n  }\n\n  onScroll = () => {\n    this.dispatchPanUpdate()\n  }\n\n  dispatchPanUpdate () {\n    this.dispatchEvent(\n      new CustomEvent('pan-update', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          scrollLeft: this.$container.scrollLeft,\n          scrollTop: this.$container.scrollTop\n        }\n      })\n    )\n  }\n\n  registerListeners () {\n    this.$container.addEventListener('pointerdown', this.startPan)\n    this.$container.addEventListener('pointerup', this.stopPan)\n    this.$container.addEventListener('pointercancel', this.stopPan)\n    this.$container.addEventListener('pointermove', this.updatePan)\n    this.$container.addEventListener('scroll', this.onScroll)\n  }\n\n  removeListeners () {\n    this.$container.removeEventListener('pointerdown', this.startPan)\n    this.$container.removeEventListener('pointerup', this.stopPan)\n    this.$container.removeEventListener('pointercancel', this.stopPan)\n    this.$container.removeEventListener('pointermove', this.updatePan)\n    this.$container.removeEventListener('scroll', this.onScroll)\n  }\n}\n\ncustomElements.define('pan-container', PanContainer)\n","import * as css from 'bundle-text:./pan-container.css'\n\nexport const template = document.createElement('template')\n\ntemplate.innerHTML = `\n  <style>${css}</style>\n\n  <main>\n    <slot></slot>\n  </main>\n`\n","module.exports = \"8b69e03213c47181\";","/*\n * Web component to display a simple progress bar\n *\n */\n\nimport { template } from './template.js'\n\n/**\n * @element progress-bar\n * @summary A simple accessible progress indicator.\n *\n * @attr {number} value - The current progress value.\n * @attr {number} max - The maximum progress value.\n * @part bar - The filled bar element, used for styling.\n */\nclass ProgressBar extends HTMLElement {\n  static get observedAttributes () {\n    return ['value', 'max']\n  }\n\n  constructor () {\n    super()\n    this.attachShadow({ mode: 'open' })\n    this.shadowRoot.appendChild(template.content.cloneNode(true))\n    this.$container = this.shadowRoot.querySelector('#container')\n    this.$bar = this.shadowRoot.querySelector('#bar')\n  }\n\n  connectedCallback () {\n    this.setAttribute('role', 'progressbar')\n    this.setAttribute('aria-valuemin', '0')\n    this.update()\n  }\n\n  attributeChangedCallback () {\n    this.update()\n  }\n\n  update () {\n    const max = Number(this.getAttribute('max') || 100)\n    const value = Math.min(Number(this.getAttribute('value') || 0), max)\n    const percent = max === 0 ? 0 : (value / max) * 100\n    this.$bar.style.width = `${percent}%`\n    this.setAttribute('aria-valuenow', value.toString())\n    this.setAttribute('aria-valuemax', max.toString())\n  }\n}\n\ncustomElements.define('progress-bar', ProgressBar)\n","import * as css from 'bundle-text:./progress-bar.css'\n\nexport const template = document.createElement('template')\n\ntemplate.innerHTML = `\n  <style>${css}</style>\n\n  <main id=\"bar\" class=\"bar\" part=\"bar\"></main>\n`\n","module.exports = \"5c9bea1c14b33787\";","/*\n * Web component to show an embedded youtube video in a lightbox overlay.\n *\n */\n\nimport { template } from './template.js'\n\n/**\n * @element media-player\n * @summary A media player lightbox for displaying images or videos.:w\n *\n * @part overlay - The overlay background element.\n * @part close-button - The button to close the lightbox.\n */\nclass MediaPlayer extends HTMLElement {\n  constructor () {\n    super()\n    this.attachShadow({ mode: 'open' })\n    this.shadowRoot.appendChild(template.content.cloneNode(true))\n    this.$overlay = this.shadowRoot.querySelector('[part=\"overlay\"]')\n    this.$closeButton = this.shadowRoot.querySelector('[part=\"close-button\"]')\n  }\n\n  connectedCallback () {\n    this.classList.add('hide')\n    this.$overlay.addEventListener('click', this.close)\n    this.$closeButton.addEventListener('click', this.close)\n  }\n\n  disconnectedCallback () {\n    this.$overlay.removeEventListener('click', this.close)\n    this.$closeButton.removeEventListener('click', this.close)\n  }\n\n  displayImage (event) {\n    const { src } = event.detail\n    this.$overlay.innerHTML = `\n    <iframe\n      src=\"${src}&autoplay=1&rel=0\"\n      frameborder=\"0\"\n      allow=\"autoplay; clipboard-write; encrypted-media; picture-in-picture\"\n      referrerpolicy=\"strict-origin-when-cross-origin\"\n      allowfullscreen\n    ></iframe>\n    `\n    this.classList.remove('hide')\n  }\n\n  close = e => {\n    if (e.target.tagName === 'IMG') return\n\n    this.classList.add('hide')\n    this.$overlay.innerHTML = ''\n\n    this.dispatchEvent(\n      new CustomEvent('player-closed', {\n        bubbles: true,\n        composed: true\n      })\n    )\n  }\n}\n\ncustomElements.define('media-player', MediaPlayer)\n","import * as css from 'bundle-text:./media-player.css'\n\nexport const template = document.createElement('template')\n\ntemplate.innerHTML = `\n  <style>${css}</style>\n\n  <div part=\"overlay\" class=\"overlay\"></div>\n  <button part=\"close-button\" class=\"close-button\" aria-label=\"Close\">\n    &times;\n  </button>\n`\n","module.exports = \"074cd4407a1e4279\";","/*\n * Web component that displays a spinning ring\n *\n */\n\nimport * as css from 'bundle-text:./loading-spinner.css'\n\n/**\n * @element loading-spinner\n * @summary A loading spinner component.\n *\n * @part spinner - The spinner element.\n */\nclass LoadingSpinner extends HTMLElement {\n  constructor () {\n    super()\n    this.attachShadow({ mode: 'open' })\n    this.shadowRoot.innerHTML = `\n      <style>${css}</style>\n\n      <div class=\"spinner\" part=\"spinner\"></div>\n    `\n  }\n}\n\ncustomElements.define('loading-spinner', LoadingSpinner)\n","module.exports = \"57411b9003ae0b12\";","/*\n * Web component that adds a blur overlay masking to its parent element.\n * Used to blur out the edges of the calendar.\n *\n */\n\nimport * as css from 'bundle-text:./blur-overlay.css'\n\nclass BlurOverlay extends HTMLElement {\n  constructor () {\n    super()\n    this.attachShadow({ mode: 'open' })\n    this.shadowRoot.innerHTML = `\n      <style>${css}</style>\n    `\n  }\n}\n\ncustomElements.define('blur-overlay', BlurOverlay)\n","module.exports = \"aa41b52296c21066\";","/*\n * Web component that renders snow on a transparent canvas overlay\n *\n */\n\nimport { template } from './template.js'\nimport { SnowCanvas } from './snow-canvas.js'\n\nclass SnowOverlay extends HTMLElement {\n  static get observedAttributes () {\n    return ['width', 'height']\n  }\n\n  get width () {\n    return this.getAttribute('width') || 300\n  }\n\n  set width (val) {\n    this.setAttribute('width', val)\n  }\n\n  get height () {\n    return this.getAttribute('height') || 150\n  }\n\n  set height (val) {\n    this.setAttribute('height', val)\n  }\n\n  constructor () {\n    super()\n    this.attachShadow({ mode: 'open' })\n    this.shadowRoot.appendChild(template.content.cloneNode(true))\n    this.$canvas = this.shadowRoot.querySelector('canvas')\n    this.snowCanvas = new SnowCanvas(this.$canvas)\n  }\n\n  disconnectedCallback () {\n    this.snowCanvas.stop()\n  }\n\n  attributeChangedCallback (name, _oldValue, newValue) {\n    if (name === 'width') {\n      this.style.width = `${newValue}px`\n      this.$canvas.width = Number(newValue)\n    }\n    if (name === 'height') {\n      this.style.height = `${newValue}px`\n      this.$canvas.height = Number(newValue)\n    }\n  }\n\n  startSnow (count) {\n    this.snowCanvas.start(count)\n  }\n}\n\ncustomElements.define('snow-overlay', SnowOverlay)\n","import * as css from 'bundle-text:./snow-overlay.css'\n\nexport const template = document.createElement('template')\n\ntemplate.innerHTML = `\n  <style>${css}</style>\n\n  <canvas class=\"snow-canvas\"></canvas>\n  <slot></slot>\n`\n","module.exports = \"80b096bbded3079e\";","export class SnowCanvas {\n  // Central configuration object for snowfall tuning\n  static DEFAULT_CONFIG = {\n    radius: { min: 1, range: 4 },\n    opacity: { min: 0.9, range: 0.1 },\n    blur: { min: 3, range: 1 },\n    fallSpeed: { min: 0.1, range: 0.7 },\n    driftSpeed: { baseRange: 0.1, depthRange: 1.8 },\n    driftPhaseIncrement: { base: 0.01, factor: 0.01 }\n  }\n\n  constructor ($canvas, config = {}) {\n    this.$canvas = $canvas\n    this.ctx = $canvas.getContext('2d')\n    this.snowflakes = []\n    this.running = false\n    this.animate = this.animate.bind(this)\n    this.config = { ...SnowCanvas.DEFAULT_CONFIG, ...config }\n  }\n\n  start (count) {\n    this.initSnowflakes(count)\n    if (!this.running) {\n      this.running = true\n      this.animate()\n    }\n  }\n\n  stop () {\n    this.running = false\n  }\n\n  setConfig (partial) {\n    this.config = { ...this.config, ...partial }\n  }\n\n  initSnowflakes (count) {\n    this.snowflakes = []\n    const cfg = this.config\n\n    for (let i = 0; i < count; i++) {\n      const depth = Math.random() // 0 = far, 1 = near\n\n      this.snowflakes.push({\n        depth,\n        x: Math.random() * this.$canvas.width,\n        y: Math.random() * this.$canvas.height,\n        radius: cfg.radius.min + depth * cfg.radius.range,\n        opacity: cfg.opacity.min + depth * cfg.opacity.range,\n        blur: cfg.blur.min + depth * cfg.blur.range,\n        speed: cfg.fallSpeed.min + depth * cfg.fallSpeed.range,\n\n        // drifting (sideways drift + drift phase\n        xSpeed:\n          (Math.random() - 0.5) *\n          (cfg.driftSpeed.baseRange + depth * cfg.driftSpeed.depthRange),\n        xOffset: Math.random() * Math.PI * 2\n      })\n    }\n  }\n\n  animate () {\n    if (!this.running) return\n\n    const { ctx, $canvas } = this\n    ctx.clearRect(0, 0, $canvas.width, $canvas.height)\n\n    for (const flake of this.snowflakes) {\n      this.drawFlake(flake)\n\n      flake.y += flake.speed\n\n      // drifting: gentle wave motion\n      flake.x += flake.xSpeed * Math.sin(flake.xOffset)\n      flake.xOffset +=\n        this.config.driftPhaseIncrement.base +\n        flake.depth * this.config.driftPhaseIncrement.factor\n\n      if (flake.y > $canvas.height) {\n        flake.y = -flake.radius\n        flake.x = Math.random() * $canvas.width\n        flake.xOffset = Math.random() * Math.PI * 2\n      }\n    }\n\n    requestAnimationFrame(this.animate)\n  }\n\n  drawFlake ({ x, y, radius, opacity, blur }) {\n    const ctx = this.ctx\n\n    ctx.save()\n    ctx.globalAlpha = opacity\n    ctx.shadowBlur = blur\n    ctx.shadowColor = '#006b66ff'\n    ctx.fillStyle = '#ffffffff'\n\n    ctx.beginPath()\n    ctx.arc(x, y, radius, 0, Math.PI * 2)\n    ctx.fill()\n\n    ctx.restore()\n  }\n}\n","/*\n * Web component button to turn the volume on and off\n *\n */\n\nimport * as css from 'bundle-text:./audio-toggle.css'\n\nclass AudioToggle extends HTMLElement {\n  static get observedAttributes () {\n    return ['on', 'off']\n  }\n\n  attributeChangedCallback (name, _oldValue, newValue) {\n    // normalize: ensure only one of 'on' or 'off'\n    if (name === 'on' && newValue !== null) {\n      if (this.hasAttribute('off')) this.removeAttribute('off')\n    } else if (name === 'off' && newValue !== null) {\n      if (this.hasAttribute('on')) this.removeAttribute('on')\n    }\n    // if both removed externally, default to off state\n    if (!this.hasAttribute('on') && !this.hasAttribute('off')) {\n      this.setAttribute('off', '')\n    }\n    this.updateIcon()\n  }\n\n  constructor () {\n    super()\n    this.attachShadow({ mode: 'open' })\n    this.shadowRoot.innerHTML = `\n      <style>${css}</style>\n      <div class=\"img-wrapper\"><img /></div>\n    `\n    this.$icon = this.shadowRoot.querySelector('img')\n    this.updateIcon()\n    this.addEventListener('click', this.toggle)\n  }\n\n  get on () {\n    return this.hasAttribute('on')\n  }\n\n  set on (value) {\n    if (value) {\n      this.setAttribute('on', '')\n      this.removeAttribute('off')\n    } else {\n      this.setAttribute('off', '')\n      this.removeAttribute('on')\n    }\n    this.updateIcon()\n  }\n\n  toggle = () => {\n    this.on = !this.on\n    this.on ? this.dispatchUnmute() : this.dispatchMute()\n  }\n\n  dispatchMute () {\n    const event = new CustomEvent('audio-mute', {\n      bubbles: true,\n      composed: true\n    })\n    this.dispatchEvent(event)\n  }\n\n  dispatchUnmute () {\n    const event = new CustomEvent('audio-unmute', {\n      bubbles: true,\n      composed: true\n    })\n    this.dispatchEvent(event)\n  }\n\n  updateIcon () {\n    // derive state only from 'on' attribute\n    const isOn = this.hasAttribute('on')\n    const iconSrc = isOn ? 'ui/volume.svg' : 'ui/volume-slash.svg'\n    this.$icon.src = `images/${iconSrc}`\n    this.$icon.alt = isOn ? 'Sound On' : 'Sound Off'\n  }\n}\n\ncustomElements.define('audio-toggle', AudioToggle)\n","module.exports = \"146e6e3b0b259408\";","/*\n * Web component button to toggle full-screen mode\n *\n */\n\nimport * as css from 'bundle-text:./fullscreen-toggle.css'\n\nclass FullscreenToggle extends HTMLElement {\n  static get observedAttributes () {\n    return ['fullscreen', 'windowed']\n  }\n\n  attributeChangedCallback (name, _oldValue, newValue) {\n    // normalize: ensure only one of 'fullscreen' or 'windowed'\n    if (name === 'fullscreen' && newValue !== null) {\n      if (this.hasAttribute('windowed')) this.removeAttribute('windowed')\n    } else if (name === 'windowed' && newValue !== null) {\n      if (this.hasAttribute('fullscreen')) this.removeAttribute('fullscreen')\n    }\n    // if both removed externally, default to windowed state\n    if (!this.hasAttribute('fullscreen') && !this.hasAttribute('windowed')) {\n      this.setAttribute('windowed', '')\n    }\n    this.updateIcon()\n  }\n\n  constructor () {\n    super()\n    this.attachShadow({ mode: 'open' })\n    this.shadowRoot.innerHTML = `\n      <style>${css}</style>\n      <div class=\"img-wrapper\"><img /></div>\n    `\n    this.$icon = this.shadowRoot.querySelector('img')\n    this.updateIcon()\n    this.addEventListener('click', this.toggle)\n  }\n\n  get fullscreen () {\n    return this.hasAttribute('fullscreen')\n  }\n\n  set fullscreen (value) {\n    if (value) {\n      this.setAttribute('fullscreen', '')\n      this.removeAttribute('windowed')\n    } else {\n      this.setAttribute('windowed', '')\n      this.removeAttribute('fullscreen')\n    }\n    this.updateIcon()\n  }\n\n  toggle = () => {\n    this.fullscreen = !this.fullscreen\n    this.fullscreen\n      ? this.dispatchEnterFullScreen()\n      : this.dispatchExitFullScreen()\n  }\n\n  dispatchEnterFullScreen () {\n    const event = new CustomEvent('enter-fullscreen', {\n      bubbles: true,\n      composed: true\n    })\n    this.dispatchEvent(event)\n  }\n\n  dispatchExitFullScreen () {\n    const event = new CustomEvent('exit-fullscreen', {\n      bubbles: true,\n      composed: true\n    })\n    this.dispatchEvent(event)\n  }\n\n  updateIcon () {\n    if (this.fullscreen) {\n      this.$icon.src = 'images/ui/minimize.svg'\n      this.$icon.alt = 'Exit full-screen'\n    } else {\n      this.$icon.src = 'images/ui/maximize.svg'\n      this.$icon.alt = 'Enter full-screen'\n    }\n  }\n}\n\ncustomElements.define('fullscreen-toggle', FullscreenToggle)\n","module.exports = \"1485126d2c27c0e0\";","/*\n * Web component to play infiniate iterations through a sequence of images\n *\n */\n\nimport * as css from 'bundle-text:./animation-sequence.css'\n\nclass AnimationSequence extends HTMLElement {\n  static get observedAttributes () {\n    return ['top', 'left']\n  }\n\n  /**\n   * @param {Object} obj - Configuration object for the animation, example:\n   * {\n   *   position: { top: 100, left: 200 },\n   *   size: { width: 300, height: 200 },\n   *   filenames: ['frame1.png', 'frame2.png', ...],\n   *   images: [ImageObject, ...],\n   *   sequence: [0,1,2,1,...]\n   * }\n   */\n  set config (obj) {\n    this._config = obj\n    this.onConfigUpdate()\n  }\n\n  get config () {\n    if (!this._config) {\n      throw new Error('[CalendarDoor] config object not set')\n    }\n    return this._config\n  }\n\n  constructor () {\n    super()\n    this.attachShadow({ mode: 'open' })\n    this.shadowRoot.innerHTML = `\n      <style>${css}</style>\n      <canvas></canvas>\n    `\n    this.$canvas = this.shadowRoot.querySelector('canvas')\n    this.ctx = this.$canvas.getContext('2d')\n  }\n\n  onTick = frameIndex => {\n    try {\n      this.renderFrame(this.config.sequence[frameIndex])\n    } catch (e) {\n      console.error('Error rendering animation frame:', e)\n    }\n  }\n\n  async onConfigUpdate () {\n    this.style.top = `${this.config.position.top}px`\n    this.style.left = `${this.config.position.left}px`\n    this.style.width = `${this.config.size.width}px`\n    this.style.height = `${this.config.size.height}px`\n    this.$canvas.width = this.config.size.width\n    this.$canvas.height = this.config.size.height\n    this.renderFrame(0)\n  }\n\n  renderFrame (frameIndex) {\n    const img = this.config.images[frameIndex]\n    if (img) {\n      this.ctx.clearRect(0, 0, this.$canvas.width, this.$canvas.height)\n      this.ctx.drawImage(img, 0, 0, this.$canvas.width, this.$canvas.height)\n    }\n  }\n}\n\ncustomElements.define('animation-sequence', AnimationSequence)\n","module.exports = \"eee545df571288bf\";","/*\n * The context manager singleton handles transitions between different contexts\n *\n */\n\nclass ContextManager {\n  current = null\n\n  change (context) {\n    if (this.current) {\n      this.current.exit()\n    }\n\n    this.current = context\n    this.current.enter()\n  }\n}\nexport const contextManager = new ContextManager()\n","import { assetLoader, STAGE_CALENDAR_ASSETS } from '../asset-loader.js'\nimport { ui } from '../ui'\nimport { contextManager } from './context-manager'\nimport { CalendarContext } from './calendar-context.js'\n\nexport class TitleContext {\n  key = 'title-context'\n  loadingProgress = 0\n  autoSwitch = false\n  $startBtn = null\n  $progressBar = null\n\n  enter () {\n    this.$startBtn = ui.selectElement('#start-button')\n    this.$progressBar = ui.selectElement('#progress-bar')\n    assetLoader.registerProgressCallback(this.key, this.onLoadingProgress)\n    assetLoader.run()\n    this.registerListeners()\n  }\n\n  exit () {\n    this.removeListeners()\n  }\n\n  onLoadingProgress = (stage, progress, done) => {\n    if (stage !== STAGE_CALENDAR_ASSETS) return\n\n    this.loadingProgress = progress\n    if (!this.autoSwitch) return\n\n    this.updateProgressBar()\n    if (!done) return\n\n    assetLoader.unregisterProgressCallback(this.key)\n\n    // Small delay to let users see 100% completion\n    setTimeout(this.goToCalendar, 1200)\n  }\n\n  onStartClick = () => {\n    assetLoader.calendarAssetsReady\n      ? this.goToCalendar()\n      : this.waitForPreload()\n  }\n\n  waitForPreload = () => {\n    this.$startBtn.classList.add('hide')\n    this.$progressBar.classList.remove('hide')\n    this.autoSwitch = true\n\n    // give the bar a chance to render with width 0 first to enable transition\n    setTimeout(this.updateProgressBar, 0)\n  }\n\n  goToCalendar = () => {\n    contextManager.change(new CalendarContext())\n  }\n\n  updateProgressBar = () => {\n    ui.updateProgressBar(this.$progressBar, this.loadingProgress)\n  }\n\n  registerListeners () {\n    this.$startBtn.addEventListener('click', this.onStartClick)\n  }\n\n  removeListeners () {\n    this.$startBtn.removeEventListener('click', this.onStartClick)\n  }\n}\n","import { audioPlayer } from './audio-player'\n\nconst ASSET_MAPPING_PATH = 'assets.json'\nconst IMAGE_BASE_PATH = 'images'\n\nexport const STAGE_INITIAL = 'stage-initial'\nexport const STAGE_CALENDAR_ASSETS = 'stage-calendar-assets'\nexport const STAGE_PACKAGE_THUMBNAILS = 'stage-package-thumbnails'\nexport const STAGE_COMPLETE = 'stage-complete'\n\nclass AssetLoader {\n  loadingStage = STAGE_INITIAL\n  progress = 0\n  progressCallbacks = []\n  cachedImages = {}\n  cachedAudioBuffers = {}\n  audioInfo = {}\n\n  _assetMapping = null\n\n  get assetMapping () {\n    if (!this._assetMapping) {\n      throw new Error('Asset mapping not loaded yet')\n    }\n    return Object.freeze(this._assetMapping)\n  }\n\n  get calendarAssetsReady () {\n    return [STAGE_PACKAGE_THUMBNAILS, STAGE_COMPLETE].includes(\n      this.loadingStage\n    )\n  }\n\n  get packageThumbnailsReady () {\n    return this.loadingStage === STAGE_COMPLETE\n  }\n\n  async run () {\n    await this.loadAssetMapping()\n    await this.preloadCalendarAssets()\n    await this.preloadPackageThumbnails()\n    this.loadingStage = STAGE_COMPLETE\n  }\n\n  registerProgressCallback (key, cb) {\n    cb(this.loadingStage, this.progress)\n    this.progressCallbacks.push({ key, cb })\n  }\n\n  unregisterProgressCallback (key) {\n    this.progressCallbacks = this.progressCallbacks.filter(\n      item => item.key !== key\n    )\n  }\n\n  // Load calendar assets with progress callback\n  // onProgress: function(stage, percent, done) => void\n  async preloadCalendarAssets () {\n    this.loadingStage = STAGE_CALENDAR_ASSETS\n\n    const imageFilenames = [\n      this._assetMapping.background.filename,\n      ...this._assetMapping.doors.map(door => door.filename),\n      ...this._assetMapping.ui,\n      ...this._assetMapping.animations.flatMap(({ filenames }) => filenames),\n      ...this.doorNumbers()\n    ]\n\n    const audioFiles = this._assetMapping.audio\n\n    let total = imageFilenames.length + audioFiles.length\n    let count = 0\n\n    await this.preloadImages(imageFilenames, () => {\n      count++\n      this.onProgress(count, total)\n    })\n\n    await Promise.all(\n      audioFiles.map(async ({ name, filename, volume }) => {\n        const buffer = await this.loadAudio(`audio/${filename}`)\n        audioPlayer.register(name, buffer)\n        count++\n        this.audioInfo[name] = { volume }\n        this.onProgress(count, total)\n      })\n    )\n  }\n\n  doorNumbers () {\n    const numbers = []\n\n    for (let i = 1; i <= 24; i++) {\n      numbers.push(`door-numbers/${i.toString()}.webp`)\n    }\n    return numbers\n  }\n\n  onProgress (loaded, total) {\n    const progress = total === 0 ? 0 : Math.floor((loaded / total) * 100)\n    this.progress = progress\n    this.progressCallbacks.forEach(({ cb }) =>\n      cb(this.loadingStage, progress, progress === 100)\n    )\n  }\n\n  getImage (filename) {\n    const img = this.cachedImages[filename]\n    if (!img) {\n      throw new Error(`[AssetLoader] image not cached: ${filename}`)\n    }\n    return img\n  }\n\n  async preloadPackageThumbnails () {\n    this.loadingStage = STAGE_PACKAGE_THUMBNAILS\n\n    const imageFilenames = this._assetMapping.doors.map(\n      ({ packageId }) => this._assetMapping.packages[packageId]?.thumbnail\n    )\n\n    await assetLoader.preloadImages(imageFilenames, (loaded, total) => {\n      const progress = total === 0 ? 0 : Math.floor((loaded / total) * 100)\n      this.progress = progress\n      this.progressCallbacks.forEach(({ cb }) =>\n        cb(this.loadingStage, progress, progress === 100)\n      )\n    })\n  }\n\n  async preloadImages (filenames, onProgress) {\n    let total = filenames.length\n    let loaded = 0\n\n    const imagePromises = filenames.map(filename =>\n      this.preloadImage(`${IMAGE_BASE_PATH}/${filename}`).then(img => {\n        this.cachedImages[filename] = img\n        loaded++\n        if (onProgress) onProgress(loaded, total)\n        return img\n      })\n    )\n\n    await Promise.all(imagePromises)\n  }\n\n  async preloadImage (src) {\n    return new Promise((resolve, reject) => {\n      const img = new Image()\n      img.onload = () => resolve(img)\n      img.onerror = () =>\n        reject(new Error(`[AssetLoader] failed to load image: ${src}`))\n      img.src = src\n    })\n  }\n\n  // Loads audio files and converts them to AudioBuffers.\n  // This can be done even when the AudioContext is suspended.\n  async loadAudio (src) {\n    const raw = await fetch(src)\n    return await raw.arrayBuffer()\n  }\n\n  async loadAssetMapping () {\n    const response = await fetch(ASSET_MAPPING_PATH)\n    this._assetMapping = await response.json()\n  }\n\n  async refreshImage (src) {\n    const img = this.cachedImages[src]\n\n    if (!img) {\n      throw new Error(`[AssetLoader] image not cached: ${src}`)\n    }\n\n    try {\n      await img.decode()\n    } catch {\n      // ignore decode errors\n    }\n  }\n}\n\nexport const assetLoader = new AssetLoader()\n","class AudioPlayer {\n  constructor () {\n    this.locked = true\n    this.audioCtx = null\n    this.masterGain = null\n    this.arrayBuffers = {}\n    this.audioBuffers = {}\n    this.activeSources = {\n      sounds: {},\n      tracks: {}\n    }\n    this.manualPause = false\n  }\n\n  async init () {\n    if (this.audioCtx) return\n\n    this.audioCtx = new AudioContext()\n    this.masterGain = this.audioCtx.createGain()\n    this.masterGain.gain.value = 1.0\n    this.masterGain.connect(this.audioCtx.destination)\n    if (this.audioCtx.state === 'suspended') {\n      await this.audioCtx.resume()\n    }\n    await this.decodeBuffers()\n    this.locked = false\n  }\n\n  get isPaused () {\n    return this.audioCtx ? this.audioCtx.state === 'suspended' : true\n  }\n\n  async playSound (name, { volume } = {}) {\n    return this._play(name, 'sounds', { volume })\n  }\n\n  async playAmbienceTrack (name, { volume } = {}) {\n    return this._play(name, 'tracks', { volume, loop: true })\n  }\n\n  async stopAmbienceTrack (name) {\n    this._stop(name, 'tracks')\n  }\n\n  async _play (name, key, { volume = 1.0, loop = false } = {}) {\n    if (!this.audioCtx) {\n      return console.warn(`[AudioPlayer] audio context is locked`)\n    }\n\n    return new Promise(resolve => {\n      const source = this.audioCtx.createBufferSource()\n      source.buffer = this.audioBuffers[name]\n      source.loop = loop\n\n      const gain = this.audioCtx.createGain()\n      gain.gain.value = Math.max(0, volume)\n\n      source.connect(gain)\n      gain.connect(this.masterGain)\n      source.start(0)\n\n      this.activeSources[key][name] = { source, gain }\n      source.onended = () => {\n        delete this.activeSources[key][name]\n        resolve()\n      }\n    })\n  }\n\n  _stop (name, key) {\n    if (!this.audioCtx) {\n      return console.warn(`[AudioPlayer] audio context locked`)\n    }\n\n    const entry = this.activeSources[key][name]\n    if (!entry) return\n\n    entry.source.stop()\n  }\n\n  register (name, arrayBuffer) {\n    this.arrayBuffers[name] = arrayBuffer\n  }\n\n  async pause (manual = false) {\n    if (!this.audioCtx) {\n      return console.warn('[AudioPlayer] cannot pause: audio context locked')\n    }\n    if (this.audioCtx.state === 'suspended') return\n    await this.audioCtx.suspend()\n    if (manual) {\n      this.manualPause = true\n    }\n  }\n\n  async resume (manual = false) {\n    if (!this.audioCtx) {\n      return console.warn('[AudioPlayer] cannot resume: audio context locked')\n    }\n    if (this.audioCtx.state === 'running') {\n      await this.audioCtx.resume()\n    }\n    if (this.manualPause && !manual) {\n      // do not auto-resume if manually paused\n      return\n    }\n\n    // only resume ambience tracks; sound effects are one-shots\n    this.clearSources('sounds')\n    this.manualPause = false\n    await this.audioCtx.resume()\n  }\n\n  clearSources (key) {\n    Object.keys(this.activeSources[key]).forEach(name => {\n      this._stop(name, key)\n    })\n  }\n\n  async decodeBuffers () {\n    if (!this.audioCtx) {\n      return console.warn('[AudioPlayer] cannot decode: audio context locked')\n    }\n\n    if (this.audioCtx.state !== 'running') {\n      await this.audioCtx.resume()\n    }\n\n    try {\n      await Promise.all(\n        Object.entries(this.arrayBuffers).map(async ([name, arrayBuffer]) => {\n          const bufferCopy = arrayBuffer.slice(0)\n          const audioBuffer = await this.audioCtx.decodeAudioData(bufferCopy)\n          this.audioBuffers[name] = audioBuffer\n        })\n      )\n    } catch (error) {\n      return `Error during audio decoding: ${error.message}`\n    }\n\n    this.arrayBuffers = {}\n  }\n}\n\nexport const audioPlayer = new AudioPlayer()\n","import { audioPlayer } from './audio-player.js'\nimport { assetLoader } from './asset-loader.js'\nimport { loadLastPosition } from './storage.js'\nclass UI {\n  $app = null\n  $animations = []\n\n  constructor () {\n    this.$app = this.selectElement('#app')\n  }\n\n  revealCalendar () {\n    this.selectElement('#title-screen').remove()\n  }\n\n  async renderCalendarAssets () {\n    const assets = assetLoader.assetMapping\n    const $snow = this.selectElement('#snow-overlay')\n    const $calendar = ui.selectElement('#calendar')\n    await this.renderBackground($snow, $calendar, assets)\n    this.renderDoors($calendar, assets)\n    this.renderAnimations($calendar, assets)\n  }\n\n  restoreLastPosition () {\n    const pos = loadLastPosition()\n    if (pos) {\n      this.selectElement('#pan-container').scrollToPosition(pos)\n    } else {\n      this.selectElement('#pan-container').scrollToInitial()\n    }\n  }\n\n  async renderBackground ($snow, $calendar, { background }) {\n    // ensure the image is loaded before applying to avoid flicker\n    await assetLoader.refreshImage(background.filename)\n    $snow.setAttribute('width', background.width)\n    $snow.setAttribute('height', background.height)\n    $calendar.style.backgroundImage = `url('images/${background.filename}')`\n    $calendar.style.width = `${background.width}px`\n    $calendar.style.height = `${background.height}px`\n  }\n\n  startSnow (flakeCount) {\n    const $snow = this.selectElement('#snow-overlay')\n    $snow.startSnow(flakeCount)\n  }\n\n  renderDoors ($calendar, { doors }) {\n    $calendar.innerHTML = ''\n    doors.forEach(door => $calendar.appendChild(this.buildDoorElement(door)))\n  }\n\n  renderAnimations ($calendar, { animations }) {\n    animations.forEach(animation => {\n      const $animation = document.createElement('animation-sequence')\n      $animation.config = {\n        ...animation,\n        images: animation.filenames.map(filename =>\n          assetLoader.getImage(filename)\n        )\n      }\n      $calendar.appendChild($animation)\n      this.$animations.push($animation)\n    })\n  }\n\n  updateAnimations (frameIndex) {\n    this.$animations.forEach($animation => {\n      $animation.onTick(frameIndex)\n    })\n  }\n\n  // @param {Object} openedDoors - map of door IDs that are opened\n  // e.g. { door-1: true, door-3: true }\n  reopenDoors (openedDoors = {}) {\n    Object.keys(openedDoors).forEach(doorId => {\n      const $door = this.selectElement(`#${doorId}`)\n      $door.open()\n    })\n  }\n\n  buildDoorElement (door) {\n    const $door = document.createElement('calendar-door')\n    $door.config = door\n    return $door\n  }\n\n  handleForbiddenDoor ($door) {\n    $door.shake()\n    this.playSound('forbidden')\n  }\n\n  async playSound (name) {\n    if (audioPlayer.isPaused) return\n\n    await audioPlayer.playSound(name, {\n      volume: assetLoader.audioInfo[name]?.volume || 1.0\n    })\n  }\n\n  playAmbience () {\n    audioPlayer.playAmbienceTrack('wind')\n  }\n\n  stopAmbience () {\n    audioPlayer.stopAmbienceTrack('wind')\n  }\n\n  updateProgressBar ($bar, progress, minValue = 2) {\n    // showing at least minValue indicates activity\n    $bar.setAttribute('value', Math.max(progress, minValue))\n  }\n\n  configurePackages () {\n    assetLoader.assetMapping.doors.forEach(door => {\n      const $door = ui.selectElement(`#${door.id}`)\n      const pkg = assetLoader.assetMapping.packages[door.packageId]\n      $door.packageConfig = pkg\n    })\n  }\n\n  enterFullscreen () {\n    if (document.fullscreenElement) return\n    this.$app.requestFullscreen()\n  }\n\n  exitFullscreen () {\n    if (!document.fullscreenElement) return\n    document.exitFullscreen()\n  }\n\n  selectElement (selector) {\n    const $el = document.querySelector(selector)\n    if (!$el) {\n      throw new Error(`UI element not found: ${selector}`)\n    }\n\n    return $el\n  }\n}\n\nexport const ui = new UI()\n","/*\n * Manage interaction with localStorage\n *\n */\n\nconst OPENED_KEY = 'opened-doors'\nconst POSITION_KEY = 'last-position'\n\nexport function saveLastPosition (position) {\n  const data = JSON.stringify(position)\n  localStorage.setItem(POSITION_KEY, data)\n}\n\nexport function loadLastPosition () {\n  const data = localStorage.getItem(POSITION_KEY)\n  if (!data) return null\n\n  try {\n    return JSON.parse(data)\n  } catch {\n    return null\n  }\n}\n\nexport function saveOpenedDoors (openedDoors) {\n  const data = JSON.stringify(openedDoors)\n  localStorage.setItem(OPENED_KEY, data)\n}\n\nexport function loadOpenedDoors () {\n  const data = localStorage.getItem(OPENED_KEY)\n  if (!data) return {}\n\n  try {\n    return JSON.parse(data)\n  } catch {\n    return {}\n  }\n}\n","import { audioPlayer } from '../audio-player.js'\nimport { assetLoader, STAGE_PACKAGE_THUMBNAILS } from '../asset-loader.js'\nimport {\n  loadOpenedDoors,\n  saveOpenedDoors,\n  saveLastPosition\n} from '../storage.js'\nimport { timer } from '../timer.js'\nimport { ui } from '../ui.js'\n\nexport class CalendarContext {\n  key = 'calendar-context'\n  openedDoors = {}\n  $calendar = null\n\n  constructor () {\n    this.startX = 0\n    this.startY = 0\n    this.dx = 0\n    this.dy = 0\n    this.walkX = 0\n    this.walkY = 0\n    this.maxX = 2560\n    this.maxY = 1440\n    this.borderSize = 50\n    this.dragging = false\n  }\n\n  async enter () {\n    this.openedDoors = loadOpenedDoors()\n    await this.render()\n    this.player = ui.selectElement('#media-player')\n    this.$calendar = ui.selectElement('#calendar')\n    this.$frame = ui.selectElement('#panic-container')\n    this.$content = ui.selectElement('.pan-content')\n    this.setStartPosition(1100, 200)\n    this.registerListeners()\n    this.prepareContentPackages()\n    this.startAnimationTimer()\n    ui.revealCalendar()\n  }\n\n  exit () {\n    this.removeListeners()\n  }\n\n  async render () {\n    await ui.renderCalendarAssets()\n    ui.reopenDoors(this.openedDoors)\n    ui.startSnow(400)\n    await audioPlayer.decodeBuffers()\n    ui.playAmbience()\n  }\n\n  onCalendarClick = event => {\n    const $door = event.target.closest('[data-door]')\n    if ($door) {\n      event.preventDefault()\n      return this.onDoorClick($door)\n    }\n\n    const $content = event.target.closest('[data-content]')\n    if ($content) {\n      $content.displayContent()\n    }\n  }\n\n  onDoorClick ($door) {\n    if (!$door.mayOpen()) {\n      return ui.handleForbiddenDoor($door)\n    }\n\n    this.openedDoors[$door.id] = true\n    saveOpenedDoors(this.openedDoors)\n    $door.open()\n    ui.playSound('door')\n  }\n\n  onShowPlayer = event => {\n    ui.stopAmbience()\n    this.player.displayImage(event)\n  }\n\n  onPlayerClosed = () => {\n    ui.playAmbience()\n  }\n\n  onAudioMute = async () => {\n    await ui.playSound('click')\n    audioPlayer.pause(true)\n  }\n\n  onAudioUnmute = () => {\n    ui.playSound('click')\n    audioPlayer.resume(true)\n  }\n\n  onEnterFullscreen = () => {\n    ui.enterFullscreen()\n  }\n\n  onExitFullscreen = () => {\n    ui.exitFullscreen()\n  }\n\n  onVisibilityChange = () => {\n    if (document.hidden) {\n      audioPlayer.pause()\n    } else {\n      audioPlayer.resume()\n    }\n  }\n\n  onTick = e => {\n    ui.updateAnimations(e.detail.i)\n  }\n\n  onKeyDown = e => {\n    if (e.code === 'Space') e.preventDefault()\n  }\n\n  onPanUpdate = e => {\n    saveLastPosition({\n      x: e.detail.scrollLeft,\n      y: e.detail.scrollTop\n    })\n  }\n\n  prepareContentPackages () {\n    assetLoader.packageThumbnailsReady\n      ? ui.configurePackages()\n      : assetLoader.registerProgressCallback(this.key, this.onLoadingProgress)\n  }\n\n  onLoadingProgress = (stage, _, done) => {\n    if (stage !== STAGE_PACKAGE_THUMBNAILS) return\n    if (!done) return\n\n    assetLoader.unregisterProgressCallback(this.key)\n    ui.configurePackages()\n  }\n\n  startAnimationTimer () {\n    timer.run()\n  }\n\n  setStartPosition (x, y) {\n    this.shift(-x, -y)\n    this.dx = -x\n    this.dy = -y\n    this.walkX = 0\n    this.walkY = 0\n  }\n\n  shift (dx, dy) {\n    const frameWidth = this.$frame.clientWidth || window.innerWidth\n    this.walkX = Math.min(dx, -this.dx + this.borderSize)\n    this.walkX = Math.max(\n      this.walkX,\n      frameWidth - this.borderSize - this.maxX - this.dx\n    )\n\n    const frameHeight = this.$frame.clientHeight || window.innerHeight\n    this.walkY = Math.min(dy, -this.dy + this.borderSize)\n    this.walkY = Math.max(\n      this.walkY,\n      frameHeight - this.borderSize - this.maxY - this.dy\n    )\n\n    const offsetX = this.dx + this.walkX\n    const offsetY = this.dy + this.walkY\n    this.$content.style.transform = `translate(${offsetX}px, ${offsetY}px)`\n  }\n\n  onWindowResize = () => {\n    this.shift(this.walkX, this.walkY)\n  }\n\n  onPointerDown = e => {\n    if (e.composedPath().some(el => el?.hasAttribute?.('data-door'))) return\n    if (e.composedPath().some(el => el?.hasAttribute?.('data-content'))) return\n\n    this.dragging = true\n    this.$frame.setPointerCapture(e.pointerId)\n    this.startX = e.clientX\n    this.startY = e.clientY\n  }\n\n  onPointerMove = e => {\n    if (this.dragging) {\n      this.shift(e.clientX - this.startX, e.clientY - this.startY)\n    }\n  }\n\n  onDragEnd = e => {\n    this.dragging = false\n    this.dx += this.walkX\n    this.dy += this.walkY\n    this.walkX = 0\n    this.walkY = 0\n    this.$frame.releasePointerCapture(e.pointerId)\n  }\n\n  registerListeners () {\n    this.$calendar.addEventListener('click', this.onCalendarClick)\n    document.addEventListener('show-player', this.onShowPlayer)\n    document.addEventListener('player-closed', this.onPlayerClosed)\n    document.addEventListener('audio-mute', this.onAudioMute)\n    document.addEventListener('audio-unmute', this.onAudioUnmute)\n    document.addEventListener('enter-fullscreen', this.onEnterFullscreen)\n    document.addEventListener('exit-fullscreen', this.onExitFullscreen)\n    document.addEventListener('visibilitychange', this.onVisibilityChange)\n    document.addEventListener('keydown', this.onKeyDown)\n    document.addEventListener('tick', this.onTick)\n    document.addEventListener('pan-update', this.onPanUpdate)\n    this.$frame.addEventListener('pointerdown', this.onPointerDown)\n    this.$frame.addEventListener('pointermove', this.onPointerMove)\n    this.$frame.addEventListener('pointerup', this.onDragEnd)\n    this.$frame.addEventListener('pointercancel', this.onDragEnd)\n    window.addEventListener('resize', this.onWindowResize)\n  }\n\n  removeListeners () {\n    this.$calendar.removeEventListener('click', this.onCalendarClick)\n    document.removeEventListener('show-player', this.onShowPlayer)\n    document.removeEventListener('player-closed', this.onPlayerClosed)\n    document.removeEventListener('audio-mute', this.onAudioMute)\n    document.removeEventListener('audio-unmute', this.onAudioUnmute)\n    document.removeEventListener('enter-fullscreen', this.onEnterFullscreen)\n    document.removeEventListener('exit-fullscreen', this.onExitFullscreen)\n    document.removeEventListener('visibilitychange', this.onVisibilityChange)\n    document.removeEventListener('keydown', this.onKeyDown)\n    document.removeEventListener('tick', this.onTick)\n    document.removeEventListener('pan-update', this.onPanUpdate)\n    this.$frame.removeEventListener('pointerdown', this.onPointerDown)\n    this.$frame.removeEventListener('pointermove', this.onPointerMove)\n    this.$frame.removeEventListener('pointerup', this.onDragEnd)\n    this.$frame.removeEventListener('pointercancel', this.onDragEnd)\n    window.removeEventListener('resize', this.onWindowResize)\n  }\n}\n","/*\n * Game-loop based timer that emits 'tick' events at a regular interval.\n *\n */\n\nclass Timer {\n  // 8 ticks per two seconds\n  dt = 0\n  counter = 0\n  maxCounter = 8\n  cutoff = (2 / 8) * 1000\n  prevTime = 0\n  ref = 0\n\n  run = time => {\n    if (this.prevTime > 0) {\n      this.dt += time - this.prevTime\n\n      if (this.dt >= this.cutoff) {\n        this.dt %= this.cutoff\n        this.counter = (this.counter + 1) % this.maxCounter\n        this.tick()\n      }\n    }\n    this.prevTime = time\n    this.ref = requestAnimationFrame(this.run)\n  }\n\n  tick () {\n    document.dispatchEvent(\n      new CustomEvent('tick', {\n        detail: { i: this.counter }\n      })\n    )\n  }\n}\n\nexport const timer = new Timer()\n"],"names":["$6954ac0c9707709f$exports","$38a474b1bc5c6f85$export$ce69bd05624d0c48","document","createElement","innerHTML","$f5891f20272693b8$var$CalendarDoor","HTMLElement","observedAttributes","config","obj","_config","update","Error","packageConfig","pkg","_packageConfig","updatePackage","attachShadow","mode","shadowRoot","appendChild","content","cloneNode","$doorFrame","querySelector","$doorLabel","$doorContent","connectedCallback","dataset","interactive","door","attributeChangedCallback","name","_oldValue","newValue","openDoor","id","top","left","position","width","height","size","style","frameUrl","filename","labelUrl","label","backgroundImage","imgSrc","thumbnail","classList","remove","openIfAllowed","mayOpen","open","doorLabel","now","Date","year","getFullYear","maxDay","getDate","day","parseInt","isNaN","shake","offsetWidth","add","dx","direction","transform","removeAttribute","setAttribute","displayContent","dispatchEvent","CustomEvent","bubbles","composed","detail","src","customElements","define","$fbb3e97c89bfbad7$exports","$6ef5f09af183a1a0$export$ce69bd05624d0c48","$bcd9bd9e89a789ee$var$PanContainer","isDown","startX","startY","scrollLeft","scrollTop","$container","registerListeners","disconnectedCallback","removeListeners","scrollToInitial","scrollWidth","clientWidth","scrollHeight","clientHeight","scrollTo","centerY","scrollToPosition","x","y","startPan","e","target","closest","clientX","clientY","updatePan","walkX","walkY","pointerType","stopPan","onScroll","dispatchPanUpdate","addEventListener","removeEventListener","$b5863b9b277e97df$exports","$5946147900fd7666$export$ce69bd05624d0c48","$fc998b0c86126c1e$var$ProgressBar","$bar","max","Number","getAttribute","value","Math","min","percent","toString","$190d25bdc1a70f0f$exports","$cacb41ab0708d436$export$ce69bd05624d0c48","$57658e45f7539bec$var$MediaPlayer","$overlay","$closeButton","close","displayImage","event","tagName","$1956b322c3b2fefa$exports","$93137edee75c2f39$var$LoadingSpinner","$0b566ea76bd3e461$exports","$87e83b09179186b1$var$BlurOverlay","$bdf1bd049d234244$exports","$3d32e77740a6959a$export$ce69bd05624d0c48","$6b9e2910d00ebaa3$export$e0baf71db43505fd","DEFAULT_CONFIG","radius","range","opacity","blur","fallSpeed","driftSpeed","baseRange","depthRange","driftPhaseIncrement","base","factor","$canvas","ctx","getContext","snowflakes","running","animate","bind","start","count","initSnowflakes","stop","setConfig","partial","cfg","i","depth","random","push","speed","xSpeed","xOffset","PI","flake","clearRect","drawFlake","sin","requestAnimationFrame","save","globalAlpha","shadowBlur","shadowColor","fillStyle","beginPath","arc","fill","restore","$ea0160750ba569a4$var$SnowOverlay","val","snowCanvas","startSnow","$9f1e96e839d699eb$exports","$9849d1cdd885665c$var$AudioToggle","hasAttribute","updateIcon","$icon","toggle","on","dispatchUnmute","dispatchMute","isOn","alt","$55e3bcfa2cb97214$exports","$671f9efa298aa28c$var$FullscreenToggle","fullscreen","dispatchEnterFullScreen","dispatchExitFullScreen","$8daf36ba1006cee5$exports","$7ca3b108dbac198a$var$AnimationSequence","onConfigUpdate","onTick","frameIndex","renderFrame","sequence","console","error","img","images","drawImage","$ae8074836ba6c190$export$d7af6644c1ae904e","current","change","context","exit","enter","$7266ce296d18dd72$export$f16b8a82b5b3b0df","locked","audioCtx","masterGain","arrayBuffers","audioBuffers","activeSources","sounds","tracks","manualPause","init","AudioContext","createGain","gain","connect","destination","state","resume","decodeBuffers","isPaused","playSound","volume","_play","playAmbienceTrack","loop","stopAmbienceTrack","_stop","key","Promise","resolve","source","createBufferSource","buffer","onended","warn","entry","register","arrayBuffer","pause","manual","suspend","clearSources","Object","keys","forEach","all","entries","map","bufferCopy","slice","audioBuffer","decodeAudioData","message","$ebd6beae392135bb$export$cc5531d45d460071","$ebd6beae392135bb$export$ca8414d904262e8c","$ebd6beae392135bb$export$6c0eb6ab21abd162","$ebd6beae392135bb$export$5065893894c18576","loadingStage","progress","progressCallbacks","cachedImages","cachedAudioBuffers","audioInfo","_assetMapping","assetMapping","freeze","calendarAssetsReady","includes","packageThumbnailsReady","run","loadAssetMapping","preloadCalendarAssets","preloadPackageThumbnails","registerProgressCallback","cb","unregisterProgressCallback","filter","item","imageFilenames","background","doors","ui","animations","flatMap","filenames","doorNumbers","audioFiles","audio","total","length","preloadImages","onProgress","loadAudio","numbers","loaded","floor","getImage","packageId","packages","imagePromises","preloadImage","then","reject","Image","onload","onerror","raw","fetch","response","json","refreshImage","decode","$744d2dad838f829a$var$OPENED_KEY","$744d2dad838f829a$var$POSITION_KEY","$84923368ea4a1ab4$export$5525e5ba287fa6f5","$app","$animations","selectElement","revealCalendar","renderCalendarAssets","assets","$snow","$calendar","renderBackground","renderDoors","renderAnimations","restoreLastPosition","pos","data","localStorage","getItem","JSON","parse","flakeCount","buildDoorElement","animation","$animation","updateAnimations","reopenDoors","openedDoors","doorId","$door","handleForbiddenDoor","playAmbience","stopAmbience","updateProgressBar","minValue","configurePackages","enterFullscreen","fullscreenElement","requestFullscreen","exitFullscreen","selector","$el","$01ccc13c74d3501f$export$9dc4ecf953986f04","dt","counter","maxCounter","cutoff","prevTime","ref","time","tick","$2fb7d8d12e1f1bff$export$3b805cea1f178355","dy","maxX","maxY","borderSize","dragging","render","player","$frame","$content","setStartPosition","prepareContentPackages","startAnimationTimer","onCalendarClick","preventDefault","onDoorClick","stringify","setItem","onShowPlayer","onPlayerClosed","onAudioMute","onAudioUnmute","onEnterFullscreen","onExitFullscreen","onVisibilityChange","hidden","onKeyDown","code","onPanUpdate","onLoadingProgress","stage","_","done","shift","frameWidth","window","innerWidth","frameHeight","innerHeight","offsetX","offsetY","onWindowResize","onPointerDown","composedPath","some","el","setPointerCapture","pointerId","onPointerMove","onDragEnd","releasePointerCapture","$974499473389885d$export$504237e456b00092","loadingProgress","autoSwitch","$startBtn","$progressBar","setTimeout","goToCalendar","onStartClick","waitForPreload","location","hash","clear","once","$2b6e161c9edcf319$var$initAudio"],"version":3,"file":"xmasmisfits.0300545e.js.map"}